(("undefined"!==typeof self?self:this)["webpackJsonpcreneauxMylittlepressing"]=("undefined"!==typeof self?self:this)["webpackJsonpcreneauxMylittlepressing"]||[]).push([[4],{"1e11":function(e,t,a){"use strict";a("32aa")},"32aa":function(e,t,a){},5772:function(e,t,a){},"86d8":function(e,t,a){"use strict";a("f1cc")},bd4c:function(e,t,a){},d85a:function(e,t,a){"use strict";a("bd4c")},e40d:function(e,t,a){"use strict";a("5772")},e813:function(e,t,a){"use strict";a.r(t);var n,r,i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"creneaux-mbt"},[a("div",{staticClass:"container first-block",attrs:{currentCreneauType:e.currentCreneauType}},[a("div",{staticClass:"creneaux-mbt--block mt-5"},[a("app-title"),e.alert_message&&""!=e.alert_message?a("div",{staticClass:"alert alert-danger"},[e._v(" "+e._s(e.alert_message)+" ")]):e._e(),a("div",{staticClass:"block-left"},[a("tab-option")],1),a("div",{staticClass:"block-border"},[a("div",{staticClass:"row font-weight-bold type-livraison mb-2"},[a("inline-description")],1),a("div",{staticClass:"row d-flex justify-content-start commande-detail mb-5"},[a("div",{staticClass:" rectangle rond-left rond-right mx-3 mx-md-0 mb-3 mb-md-0  ml-md-5  mr-lg-5  pt-3  pl-3 pr-3 col-md-3 "},[a("div",{staticClass:"h2 cursor-pointer"},[e._v("ADRESSE")]),a("div",{staticClass:"d-flex justify-content-between justify-content-md-start align-items-center"},[a("mapGoogle"),a("div",{staticClass:"icone-map"})],1)]),a("div",{staticClass:"col-md-7"},[a("div",{staticClass:"row ml-md-4 h-100"},[a("creneau",{attrs:{title:"Collecte",type:"collecte"}}),a("creneau",{attrs:{title:"Livraison",classes:"rond-right",type:"livraison"}})],1)])])])],1)])])},s=[],o=(a("96cf"),a("1da1")),c=a("5530"),l=a("2f62"),u={name:"AppTitle",render:function(e){var t=e,a=this.creneauConfigs.title,n={class:{"text-left":!0,"font-weight-bold":!0}},r=[t("h1",n,a)];return t("div",r)},computed:Object(c["a"])({},Object(l["c"])(["creneauConfigs"]))},d=u,p=a("2877"),h=Object(p["a"])(d,n,r,!1,null,null,null),f=h.exports,m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"\n    col-12\n    width-100\n    d-flex\n    flex-wrap\n    mt-3\n    mb-3\n    font-weight-bold\n    type-livraison\n  ",domProps:{innerHTML:e._s(e.activeTabOption)}})},v=[],y={name:"InlineDesc",computed:Object(c["a"])({},Object(l["b"])(["activeTabOption"]))},_=y,g=Object(p["a"])(_,m,v,!1,null,null,null),b=g.exports,C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"first-row"},e._l(e.creneauType,(function(t,n){return a("div",{key:n,staticClass:"option btn",class:t.active?"option-badge":"",on:{click:function(t){return e.SelectTypeTab(n)}}},[a("div",{staticClass:"mx-auto h2 titre-tab"},[e._v(" "+e._s(t.titre)+" "),n>0?a("span",{staticClass:"small small-text d-block"},[e._v(" "+e._s(t.montant)+" ")]):e._e()])])})),0)},D=[],w={name:"SelectionHoraire",computed:Object(c["a"])({},Object(l["c"])(["creneauType"])),methods:{SelectTypeTab:function(e){this.$store.dispatch("SelectTypeTab",e)}}},x=w,k=Object(p["a"])(x,C,D,!1,null,null,null),M=k.exports,T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"h1 cursor-pointer"}),a("p",{staticClass:"cursor-pointer"}),e.location.city_on_map||e.location.locality?e._e():a("span",{staticClass:"btn option-badge mt-4 mb-3",on:{click:e.openPopupMap}},[e._v(" Ajouter une adresse ")]),""!==e.location.current_address?a("div",{staticClass:"h1 cursor-pointer",on:{click:e.openPopupMap}},[e._v(" "+e._s(e.location.locality)+" ")]):e._e(),""!==e.location.current_address?a("p",{staticClass:"cursor-pointer"},[e._v(" "+e._s(e.location.current_address)+" ")]):e._e(),a("AppPopUpMap",{ref:"apppopupmap",attrs:{"etape-checkout":!1,"action-after":!1},on:{update_location:e.update_location}})],1)},O=[],L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("mapgoogle",{ref:"mapgoogle",attrs:{configs:e.configs,"etape-checkout":e.etapeCheckout,"action-after":e.actionAfter},on:{update_location:e.update_location}})},j=[],S=a("b51a"),Y=a("b787"),H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("section",{staticClass:"modal micromodal-slide",attrs:{id:"map-popup-wbu"}},[a("div",{staticClass:"modal__overlay"},[a("div",{staticClass:"modal__container",attrs:{role:"dialog","aria-modal":"true","aria-labelledby":"modal-1-title"}},[a("header",{staticClass:"modal__header"},[a("h2",{staticClass:"modal__title",attrs:{id:"modal-1-title"}},[e._v(" "+e._s(e.configs.titre_map.value)+" ")]),a("a",{staticClass:"modal__close",attrs:{href:"#",rel:"modal:close"},on:{click:function(t){return e.micromodal.close("map-popup-wbu")}}})]),a("main",{staticClass:"modal__content",attrs:{id:"modal-1-content"}},[a("div",{staticClass:"m-0 p-0 container-map"},[a("div",{attrs:{id:"map-display-wbu"}}),a("div",{staticClass:"text-over-lay"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.current_address,expression:"current_address"}],staticClass:"form-control",attrs:{type:"text",placeholder:e.placeholder,id:"map-input-over"},domProps:{value:e.current_address},on:{input:function(t){t.target.composing||(e.current_address=t.target.value)}}})]),a("div",{staticClass:"center-marker"}),a("div",{staticClass:"address-confirm"},[a("button",{staticClass:"btn btn-lg bg-cl1",on:{click:e.save_localisation_cookie}},[e._v(" Confirmer l'adresse ")])])])])])])])])},P=[],A=(a("4f27"),a("2311"),a("977c"),a("13eb"),a("c10f"),a("dcbb"),a("43c9"),a("0202"),a("39e3"),a("ab51"),a("7eb8"),a("06d1")),B={apiKey:"AIzaSyDurloZ0-xj8CNrQwkeSc53A-_n35Xji2Y",GoogleObejct:null,createGoogleObject:function(){var e=this,t=new A["a"]({apiKey:this.apiKey,version:"weekly",libraries:["places","geometry"]});return new Promise((function(a){t.load().then((function(t){e.GoogleObejct=t,a(t)})).catch((function(e){console.log("Erreur initialisation de la MAP : ",e)}))}))},extractPathForPolygon:function(e){var t=JSON.parse(e),a=[];if(t.features&&t.features[0]&&t.features[0].geometry&&t.features[0].geometry.coordinates)for(var n in t.features[0].geometry.coordinates[0]){var r=t.features[0].geometry.coordinates[0][n];a.push({lat:r[1],lng:r[0]})}return a},convertNewLineToArray:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\n";return e.split(t).map((function(e){return e.trim()}))}},E=a("7563"),R={name:"Mapgoogle",props:{configs:{type:Object,required:!0},displayMarker:{type:Boolean,default:!0},image:{type:String,default:"/localisation/img/marker.png"},urlGood:{type:String,default:"/cart"},urlBad:{type:String,default:"/pages/map-error"},etapeCheckout:{type:Boolean,default:!0},actionAfter:{type:Boolean,default:!1}},data:function(){return{id_html:"map-google-field",villes:B.convertNewLineToArray(this.configs.villes.value,";"),list_box:B.convertNewLineToArray(this.configs.bps.value),micromodal:E["a"],map:null,lat:45.7941459,lon:4.68941940000002,point_in_polygon:!1,point_in_ville:!1,point_in_box:!1,titre_popup:"Merci de confirmer votre adresse",current_address:"",valide_text:"Commander maintenant",placeholder:"Entrez votre adresse"}},mounted:function(){this.point_in_box=!1,this.point_in_polygon=!1,this.point_in_ville=!1,this.createGoogleObject(),this.current_address=this.$store.state.location.current_address?this.$store.state.location.current_address:""},methods:{openPopupMap:function(){this.micromodal.show("map-popup-wbu")},closePopupMap:function(){this.micromodal.close("map-popup-wbu")},createGoogleObject:function(){var e=this;B.createGoogleObject().then((function(t){e.GoogleObejct=t,e.getPlace(),e.initMap(),e.geocoder=new e.GoogleObejct.maps.Geocoder}))},getPlace:function(){var e=this,t=document.querySelector("#map-input-over");this.options={componentRestrictions:{country:["fr"]},types:["address"],strictBounds:!0};var a=new this.GoogleObejct.maps.places.Autocomplete(t,this.options);this.GoogleObejct.maps.event.addListener(a,"place_changed",(function(){var t=a.getPlace();t&&t.formatted_address&&(e.current_address=t.formatted_address,e.city_on_map=t.vicinity,e.updateMap(t),e.openPopupMap())}))},initMap:function(){var e=this,t=this.lat,a=this.lon;this.map=new this.GoogleObejct.maps.Map(document.getElementById("map-display-wbu"),{center:new this.GoogleObejct.maps.LatLng(t,a),zoom:17,mapTypeId:this.GoogleObejct.maps.MapTypeId.ROADMAP,mapTypeControl:!1,scrollwheel:!1,mapTypeControlOptions:{style:this.GoogleObejct.maps.MapTypeControlStyle.HORIZONTAL_BAR},navigationControl:!1,panControl:!1,zoomControl:!0,streetViewControl:!1,fullscreenControl:!1,navigationControlOptions:{style:this.GoogleObejct.maps.NavigationControlStyle.ZOOM_PAN},styles:[{featureType:"poi",elementType:"labels.text.stroke",stylers:[{visibility:"off"}]},{featureType:"landscape.natural",elementType:"geometry",stylers:[{color:"#b8cb92"}]},{featureType:"landscape.man_made",elementType:"geometry",stylers:[{color:"#ece2d9"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road.highway",elementType:"labels",stylers:[{visibility:"off"}]}]}),this.setMarker(),this.map.addListener("dragend",(function(){window.setTimeout((function(){var t=e.map.getCenter();t&&(e.lat=t.lat(),e.lon=t.lng(),e.city_on_map="",e.obtenir_address_proche())}),1e3)})),this.buildpolygon(),this.valide_selection()},updateMap:function(e){e.geometry&&(this.map.panTo(e.geometry.location),this.lat=e.geometry.location.lat(),this.lon=e.geometry.location.lng(),this.setMarker(),this.valide_selection())},valide_selection:function(){this.check_if_new_adress_in_polygon(),this.check_if_new_adress_in_villes(),this.check_if_new_adress_in_box()},obtenir_address_proche:function(){var e=this,t=new this.GoogleObejct.maps.LatLng(this.lat,this.lon);this.geocoder.geocode({location:t},(function(t,a){"OK"==a&&(e.current_address=t[0].formatted_address,e.updateMap(t[0]),e.getNameVilleFromPlace(t[0]))}))},setMarker:function(){if(!this.displayMarker)return!1;var e=this,t=this.lat,a=this.lon;this.marker=new this.GoogleObejct.maps.Marker({position:{lat:t,lng:a},map:e.map,icon:this.image})},save_localisation_cookie:function(){if(""==this.current_address)return this.$store.dispatch("setLocation",""),alert("Vous devez definir une adresse"),!1;if(this.point_in_polygon&&this.point_in_ville&&this.point_in_box){var e={current_address:this.current_address,city_on_map:this.city_on_map,locality:this.locality,route:this.route};this.$store.dispatch("setLocation",e),this.$emit("update_location",e),this.etapeCheckout?window.location.href=this.urlGood:(document.querySelector(".modal__close").click(),this.actionAfter&&document.querySelector(".button.cart-checkout-custom").click())}else this.$store.dispatch("setLocation",""),window.location.href=this.urlBad},buildpolygon:function(){this.polygon=new this.GoogleObejct.maps.Polygon({path:B.extractPathForPolygon(this.configs.zone_valide.value),geodesic:!0,strokeColor:"#48a0d9",strokeOpacity:.5,strokeWeight:4,fillColor:"#48a0d9",fillOpacity:.15}),this.polygon.setMap(this.map)},check_if_new_adress_in_polygon:function(){var e=new this.GoogleObejct.maps.LatLng(this.lat,this.lon);this.GoogleObejct.maps.geometry.poly.containsLocation(e,this.polygon)?this.point_in_polygon=!0:this.point_in_polygon=!1},check_if_new_adress_in_villes:function(){var e=this,t=function(){var t=!1;if(e.current_address&&e.current_address.length>0){var a=e.current_address.split(",");a[1].length>0&&e.villes.forEach((function(e){a[1].indexOf(e)>=0&&(t=!0)}))}return t};return"polygon_ville"!=this.type_limitation?(this.point_in_ville=!0,!1):this.villes.indexOf(this.city_on_map)>=0||t()?(this.point_in_ville=!0,!0):void(this.point_in_ville=!1)},check_if_new_adress_in_box:function(){var e=this,t=function(){var t=!1;return e.current_address&&e.current_address.length>0&&e.current_address&&e.list_box.forEach((function(a){e.current_address.indexOf(a)>=0&&(t=!0)})),t};return"polygon_box"!=this.type_limitation?(this.point_in_box=!0,!1):t()?(this.point_in_box=!0,!0):(this.point_in_box=!1,!0)},getNameVilleFromPlace:function(e){var t="",a="";if(e.address_components){for(var n in e.address_components){var r=e.address_components[n];r.types&&r.types.includes("locality")&&""==a&&(a=r.long_name),r.types&&r.types.includes("route")&&""==t&&(t=r.long_name)}this.route=t,this.locality=a}}}},V=R,I=Object(p["a"])(V,H,P,!1,null,null,null),$=I.exports,z={name:"AppPopUpMap",store:S["a"],props:{etapeCheckout:{type:Boolean,required:!0},actionAfter:{type:Boolean,required:!0}},components:{mapgoogle:$},computed:Object(c["a"])({},Object(Y["b"])(["configs"])),methods:{openModal:function(){this.$refs.mapgoogle.openPopupMap()},update_location:function(e){this.$emit("update_location",e)}}},F=z,q=(a("e40d"),Object(p["a"])(F,L,j,!1,null,"6b7adad7",null)),G=q.exports,N={name:"MapGoogle",components:{AppPopUpMap:G},computed:Object(c["a"])({},Object(l["c"])(["location"])),methods:{openPopupMap:function(){this.$refs.apppopupmap.openModal()},update_location:function(e){console.log(" update_location : ",e),this.$store.dispatch("setLocation",e)}}},W=N,J=Object(p["a"])(W,T,O,!1,null,null,null),U=J.exports,K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"rectangle mx-2 mx-md-0 mb-3 mb-md-0 mx-3 pt-4 pl-sm-3 col-md-6",class:e.classes},[a("div",{staticClass:"title-creneau h2"},[e._v(e._s(e.title))]),a("div",{staticClass:" d-flex justify-content-between justify-content-md-start line-creneau h1 "},[a("hours",{attrs:{type:e.type},on:{selectNextDay:e.selectNextDay}}),a("i",{staticClass:"icone-svg mb-md-1 mb-lg-2 cursor-pointer",on:{click:function(t){e.showCalandar=!e.showCalandar}}},[a("SvgCalandar")],1)],1),a("p",{staticClass:"cursor-pointer",on:{click:function(t){e.showCalandar=!e.showCalandar}}},[e._v(" "+e._s(e.appDateDisplay)+" ")]),e.showCalandar?a("div",{staticClass:"over-container-date",on:{click:function(t){e.showCalandar=!e.showCalandar}}}):e._e(),a("calendar",{ref:"calendar",attrs:{"show-calandar":e.showCalandar,type:e.type}})],1)},Z=[],Q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%"},attrs:{triggerBuilder:e.triggerBuilder,TriggerAfterHourBuild:e.TriggerAfterHourBuild}},[a("advanced-select",{attrs:{disabled:e.disabled_creneau,options:e.list_creneaux,"show-labels":!1,searchable:!1,placeholder:"00:00 - 00:00","track-by":"begin","open-direction":"bottom"},scopedSlots:e._u([{key:"singleLabel",fn:function(t){var a=t.option;return[e._v(" "+e._s(a.begin)+" - "+e._s(a.end)+" ")]}},{key:"option",fn:function(t){return[a("span",{attrs:{checkstatus:t.option.checkstatus}},[e._v(" "+e._s(t.option.begin)+" - "+e._s(t.option.end)+" ")])]}}]),model:{value:e.current_creneau,callback:function(t){e.current_creneau=t},expression:"current_creneau"}},[a("template",{slot:"noOptions"},[a("span",[e._v(" Aucun créneau disponible à cette date ")])])],2)],1)},X=[],ee=(a("d3b7"),a("e6cf"),a("ac1f"),a("1276"),a("8e5f")),te=a.n(ee),ae=a("2069"),ne=a("d4ec"),re=a("bee2"),ie=(a("caad"),a("e260"),a("2532"),a("ddb0"),a("4160"),a("159b"),a("4360")),se=function(){function e(t,a,n,r,i){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"days";if(Object(ne["a"])(this,e),this.dateMonth=t,this.IndexDayDisabled=[],this.DaysDisabledDate=[],this.DaysDisabledPeriode=[],this.location=ie["a"].state.location,n.days&&this.setDaysDisabled(n.days),this.type=a,this.currentCreneauType=r,i.length)for(var o in i){var c=i[o];c.type_disabled===s&&(this.setDaysDisabledDate(c.date_desactivee,c.pobox),this.setDaysDisabledPeriode(c.periode_desactivee,c.pobox))}}return Object(re["a"])(e,[{key:"setDaysDisabled",value:function(e){var t=this;e.forEach((function(e){e.value||t.IndexDayDisabled.push(e.indice)}))}},{key:"setDaysDisabledDate",value:function(e,t){var a=this,n=!1;this.location.current_address&&t.forEach((function(e){a.location.current_address.includes(e.value)&&(n=!0)})),(0===t.length||n)&&e.forEach((function(e){a.DaysDisabledDate.push(e.date)}))}},{key:"setDaysDisabledPeriode",value:function(e,t){var a=this,n=!1;this.location.current_address&&t.forEach((function(e){a.location.current_address.includes(e.value)&&(n=!0)})),(0===t.length||n)&&e.forEach((function(e){""!==e.debut&&""!==e.fin&&a.DaysDisabledPeriode.push(e)}))}},{key:"ValidationDay",value:function(e){var t=this;return new Promise((function(a){if(e.diff(t.dateMonth,"minute")>=0)if(t.IndexDayDisabled.includes(e.day()))a(t.statusDate(e,!1,"default-disable-day"));else if(t.DaysDisabledDate.includes(e.format("YYYY-MM-DD")))a(t.statusDate(e,!1,"default-disable-date"));else if(t.DaysDisabledPeriode.length)for(var n in t.DaysDisabledPeriode){var r=t.DaysDisabledPeriode[n],i=e.diff(moment(r.debut,"YYYY-MM-DD"),"minute"),s=e.diff(moment(r.fin,"YYYY-MM-DD"),"minute");if(i>=0&&s<=0){a(t.statusDate(e,!1,"default-disable-periode"));break}var o=parseInt(n)+1;o===t.DaysDisabledPeriode.length&&a(t.statusDate(e,!0,"default-actif-periode"))}else a(t.statusDate(e,!0,"default-actif-date"));else a(t.statusDate(e,!1,"default-disable"))}))}},{key:"disabledByCodePostal",value:function(){console.log("store : ",ie["a"].state.location)}},{key:"statusDate",value:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return{status:t,custom_class:a,date:e.date(),select:n,date_string:e.format("YYYY-MM-DD")}}}]),e}(),oe=se,ce=function(){function e(t,a,n){Object(ne["a"])(this,e),this.type=a,this.date=t,this.filterHours=[],this.creneauFilters=n}return Object(re["a"])(e,[{key:"getPlageDate",value:function(e){if(this.dateBegin=this.date,""!=e.h_debut&&""!=e.h_fin){var t=e.h_debut.split(":"),a=e.h_fin.split(":");t[1]&&a[1]&&this.filterHours.push({Filter:e,dateBegin:moment(this.date).set({hour:t[0],minute:t[1],second:0}),dateEnd:moment(this.date).set({hour:a[0],minute:a[1],second:0})})}}},{key:"rebuildFilter",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a,n,r,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.t0=regeneratorRuntime.keys(this.creneauFilters);case 1:if((e.t1=e.t0()).done){e.next=15;break}if(t=e.t1.value,a=this.creneauFilters[t],"hours"!==a.type_disabled){e.next=13;break}if(""==a.h_debut||""==a.h_fin){e.next=13;break}return n=new oe(this.date,this.type,[],[],[a],"hours"),e.next=9,n.ValidationDay(this.date);case 9:r=e.sent,i=a.h_debut.split(":"),s=a.h_fin.split(":"),i[1]&&s[1]&&this.filterHours.push(Object(c["a"])(Object(c["a"])({},a),{},{dayValid:r.status,dateBegin:moment(this.date).set({hour:i[0],minute:i[1],second:0}),dateEnd:moment(this.date).set({hour:s[0],minute:s[1],second:0})}));case 13:e.next=1;break;case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"checkIsDisabled",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,a){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){0===n.filterHours.length&&e(!1);var r=function(e){var n=t.diff(e.dateBegin,"minute"),r=t.diff(e.dateEnd,"minute"),i=a.diff(e.dateBegin,"minute"),s=a.diff(e.dateEnd,"minute");return n>=0&&r<0||i>0&&s<=0||r<0&&s>0};for(var i in n.filterHours){var s=n.filterHours[i];if(s.jours_select.length){if(s.jours_select.includes(n.date.day())&&r(s)&&!s.dayValid){e(!0);break}}else if(r(s)&&!s.dayValid){e(!0);break}var o=parseInt(i)+1;n.filterHours.length===o&&e(!1)}})));case 1:case"end":return e.stop()}}),e)})));function t(t,a){return e.apply(this,arguments)}return t}()}]),e}(),le=ce,ue=function(){function e(t,a,n,r,i){Object(ne["a"])(this,e),this.date=t,this.creneauFilters=a,this.creneauConfigs=n,this.currentCreneauType=r,this.list_creneaux=[],this.type=i}return Object(re["a"])(e,[{key:"getCurrentBandHour",value:function(){var e=this,t=this.creneauConfigs;return new Promise((function(a){if(t.days)for(var n in t.days){var r=t.days[n];r.indice===e.date.day()&&a(r)}}))}},{key:"buildHour",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a,n,r,i,s,o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new le(this.date,this.type,this.creneauFilters),e.next=3,t.rebuildFilter();case 3:return e.next=5,this.getCurrentBandHour();case 5:return a=e.sent,n=a.debut.split(":"),r=a.fin.split(":"),i=moment(this.date).set({hour:n[0],minute:n[1],second:0}),s=moment(this.date).set({hour:r[0],minute:r[1],second:0}),e.abrupt("return",new Promise((function(e){var a=function a(){var n=moment(i).add(o.currentCreneauType.creneau,"minute");n.diff(s)<=0?t.checkIsDisabled(i,n).then((function(e){var t={begin:i.format("HH:mm"),end:n.format("HH:mm"),$isDisabled:e,checkstatus:""};i.diff(o.date)>0&&!e&&o.list_creneaux.push(t),i.add(o.currentCreneauType.delai_next_creneau,"minute"),a()})):e(!0)};a()})));case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),de=ue,pe={name:"Hours",props:{type:{type:String,required:!0}},components:{AdvancedSelect:te.a},data:function(){return{current_creneau:"",disabled_creneau:!1,list_creneaux:[]}},computed:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(l["b"])(["appDate"])),Object(l["c"])(["activeType","creneauConfigs","creneauFilters","creneauType","creneauCollecte","creneauLivraison"])),{},{WatchDateSelect:function(){if(this.appDate){if(this.type===ae["a"].crex1.id){var e=moment(this.creneauCollecte.date_string,"YYYY-MM-DD");return this.appDate.format("YYYY-MM-DD")==this.creneauCollecte.date_string&&e.set(this.getHours),e}if(this.type===ae["a"].crex2.id){var t=moment(this.creneauLivraison.date_string,"YYYY-MM-DD").set(this.getHours);return t}}return null},getHours:function(){return this.type===ae["a"].crex1.id?{hour:this.appDate.hour(),minute:this.appDate.minute()+parseInt(this.creneauConfigs.deccalage_creneau_depart),second:this.appDate.second()}:this.type===ae["a"].crex2.id&&this.creneauCollecte.date?{hour:this.creneauCollecte.date.hour(),minute:this.creneauCollecte.date.minute(),second:this.creneauCollecte.date.second()}:null},currentCreneauType:function(){return this.creneauType[this.activeType]},getCurrentBandHour:function(){if(this.creneauConfigs.days&&this.WatchDateSelect&&this.WatchDateSelect._isValid)for(var e in this.creneauConfigs.days){var t=this.creneauConfigs.days[e];if(t.indice===this.WatchDateSelect.day())return t}return null},triggerBuilder:function(){return this.getCurrentBandHour?(this.emptyValue(),this.buildHours(),this.getCurrentBandHour):null},TriggerAfterHourBuild:function(){return this.list_creneaux.length?(this.selectFirtCreneau(),this.list_creneaux):null}}),watch:{current_creneau:function(e){this.$store.dispatch("SetSelectHour",this.BuildPayload(e))}},methods:{selectFirtCreneau:function(){this.current_creneau=this.list_creneaux[0]},emptyValue:function(){this.current_creneau=!1,this.list_creneaux=[]},BuildPayload:function(e){if(!e)return{type:this.type,hour:e,date:e};var t=e.begin.split(":");return{type:this.type,hour:e,date:moment(this.WatchDateSelect).set({hour:t[0],minute:t[1],secodne:0})}},buildHours:function(){var e=this;console.log("buildHours : ",this.type);var t=new de(this.WatchDateSelect,this.creneauFilters,this.creneauConfigs,this.currentCreneauType,this.type);t.buildHour().then((function(){e.list_creneaux=t.list_creneaux}))},buildHoursNone:function(){var e=this;this.list_creneaux=[];var t=this.getCurrentBandHour.debut.split(":"),a=this.getCurrentBandHour.fin.split(":"),n=moment(this.WatchDateSelect).set({hour:t[0],minute:t[1],second:0}),r=moment(this.WatchDateSelect).set({hour:a[0],minute:a[1],second:0}),i=function t(){var a=moment(n).add(e.currentCreneauType.creneau,"minute");a.diff(r)<=0?e.ValidHour(n,a).then((function(r){var i={begin:n.format("HH:mm"),end:a.format("HH:mm"),$isDisabled:r,checkstatus:""};n.diff(e.WatchDateSelect)>0&&!r&&e.list_creneaux.push(i),n.add(e.currentCreneauType.delai_next_creneau,"minute"),t()})):setTimeout((function(){}),600)};i()},ValidHour:function(e,t){var a=new de(this.WatchDateSelect,this.type,this.creneauFilters);return new Promise((function(n){a.getPlageDate2().then((function(){a.checkIsDisabled(e,t).then((function(e){n(e)}))}))}))}}},he=pe,fe=(a("d85a"),Object(p["a"])(he,Q,X,!1,null,null,null)),me=fe.exports,ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.showCalandar,expression:"showCalandar"}],staticClass:"container-date flat cercle",attrs:{initCreneau:e.initCreneau,ReInitCreneauLivraison:e.ReInitCreneauLivraison,updateCurrentDateSelect:e.updateCurrentDateSelect}},[a("div",{staticClass:"single-date-picker__calendar-month-header"},[a("div",{staticClass:"single-date-picker__arrow left",on:{click:e.previowMonth}}),""!=e.calandarTitle?a("div",{staticClass:"single-date-picker__year",domProps:{innerHTML:e._s(e.calandarTitle)}}):e._e(),a("div",{staticClass:"single-date-picker__arrow right",on:{click:e.nextMonth}})]),a("ul",{staticClass:"d-flex flex-wrap justify-content-center"},[e.showDayLabel?a("div",{staticClass:"d-flex flex-wrap justify-content-center w-100"},[a("li",{staticClass:"date day"},[e._v(" Lun ")]),a("li",{staticClass:"date day"},[e._v(" Mar ")]),a("li",{staticClass:"date day"},[e._v(" Mer ")]),a("li",{staticClass:"date day"},[e._v(" Jeu ")]),a("li",{staticClass:"date day"},[e._v(" Ven ")]),a("li",{staticClass:"date day"},[e._v(" Sam ")]),a("li",{staticClass:"date day"},[e._v(" Dim ")])]):e._e(),e._l(e.listCalanderDays,(function(t,n){return a("li",{key:n,class:["date",t.status?"actif":"disable",t.custom_class,t.select?"selected":""],on:{click:function(a){return e.selectDate(t)}}},[a("span",{domProps:{innerHTML:e._s(t.date)}})])}))],2)])},ye=[],_e=function(){function e(t,a,n,r,i,s){Object(ne["a"])(this,e),this.currentDate=moment(t),this.currentMonth=this.currentDate.month(),this.currentYear=this.currentDate.year(),this.dates=[],this.dateMonth=moment(a).set({hour:0,minute:0,second:0}),this.creneauConfigs=r,this.currentCreneauType=i,this.creneauFilters=s,this.type=n,this.CountDecallageAppliquer=0,this.currentCreneauType.delai=parseInt(this.currentCreneauType.delai)}return Object(re["a"])(e,[{key:"buildDaysOfMonth",value:function(){var e=this,t=6,a=moment().set({year:this.currentYear,month:this.currentMonth,date:1,hour:0,minute:0,second:0}),n=a.day();n||(n=7),a.add(-n,"day"),n--;for(var r=32-moment().set({year:this.currentYear,month:this.currentMonth,date:32,hour:0,minute:0,second:0}).date(),i=moment().set({year:this.currentYear,month:this.currentMonth,date:r,hour:0,minute:0,second:0}),s=1,o=0;o<t;o++){if(s>r)break;for(var c=0;c<7;c++){var l=new oe(this.dateMonth,this.type,this.creneauConfigs,this.currentCreneauType,this.creneauFilters);if(0===o&&c<n){var u=a.add(1,"day");l.ValidationDay(u).then((function(t){e.dates.push(e.DisabledBydelai(t))}))}else if(s>r){var d=i.add(1,"day");l.ValidationDay(d).then((function(t){e.dates.push(e.DisabledBydelai(t))}))}else{var p=a.add(1,"day");l.ValidationDay(p).then((function(t){e.dates.push(e.DisabledBydelai(t))})),s++}}}}},{key:"DisabledBydelai",value:function(e){return"livraison"===this.type&&this.CountDecallageAppliquer<this.currentCreneauType.delai&&e.status&&(this.CountDecallageAppliquer++,e.status=!1,e.custom_class="default-disable-delai"),e}}]),e}(),ge=_e,be={name:"Calendar",props:{showCalandar:{type:Boolean,default:!1},type:{type:String,required:!0}},data:function(){return{listCalanderDays:[],calendarNav:0,calandarTitle:"",showMonthInDate:!1,showDayLabel:!0,dateSelect:null}},computed:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(l["b"])(["appDate"])),Object(l["c"])(["activeType","creneauConfigs","creneauFilters","creneauType","creneauCollecte","creneauLivraison"])),{},{initCreneau:function(){if(console.log("initCreneau : ",this.type),this.type===ae["a"].crex1.id){if(this.appDate)return this.buildCalendar(),this.appDate}else if(this.type===ae["a"].crex2.id&&this.creneauCollecte.date_string)return this.buildCalendar(),this.creneauCollecte.date_string;return null},ReInitCreneauLivraison:function(){return this.creneauCollecte.date_string&&this.currentCreneauType&&this.type===ae["a"].crex2.id&&this.emptyCurentDateSelect(),this.creneauCollecte.date_string},updateCurrentDateSelect:function(){return this.listCalanderDays.length?(this.type==ae["a"].crex1.id&&(this.creneauCollecte.date_string?this.selectEgalActiveDate():this.selectFirstActiveDate()),this.type==ae["a"].crex2.id&&(this.creneauLivraison.date_string?this.selectEgalActiveDate():this.selectFirstActiveDate()),this.listCalanderDays.length):null},currentCreneauType:function(){return this.creneauType[this.activeType]}}),methods:{emptyCurentDateSelect:function(){this.$store.dispatch("SetSelectDate",this.BuildPayload(!1)),this.calendarNav=0},BuildPayload:function(e){return{type:this.type,date_string:e}},selectFirstActiveDate:function(){for(var e in this.listCalanderDays){var t=this.listCalanderDays[e];if(t.status){t.select=!0,this.$store.dispatch("SetSelectDate",this.BuildPayload(t.date_string));break}var a=parseInt(e)+1;this.listCalanderDays.length===a&&this.nextMonth()}},selectSpecifiqDateActive:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=0;for(var a in this.listCalanderDays){var n=this.listCalanderDays[a];if(n.status){if(t==e&&t<5){n.select=!0,this.$store.dispatch("SetSelectDate",this.BuildPayload(n.date_string));break}n.select=!1,n.status=!1,t++}var r=parseInt(a)+1;this.listCalanderDays.length===r&&this.nextMonth()}},selectEgalActiveDate:function(){for(var e in this.listCalanderDays){var t=this.listCalanderDays[e];if(this.type===ae["a"].crex1.id&&t.date_string===this.creneauCollecte.date_string){t.status?t.select=!0:this.selectFirstActiveDate();break}if(this.type===ae["a"].crex2.id&&t.date_string===this.creneauLivraison.date_string){t.status?t.select=!0:this.selectFirstActiveDate();break}var a=parseInt(e)+1;this.listCalanderDays.length==a&&(this.type,ae["a"].crex2.id)}},selectDate:function(e){if(!e.status)return!1;this.listCalanderDays.forEach((function(e){e.select=!1})),e.select=!0,this.$store.dispatch("SetSelectDate",this.BuildPayload(e.date_string))},previowMonth:function(){this.calendarNav--},nextMonth:function(){this.calendarNav++},buildCalendar:function(){var e,t;this.type===ae["a"].crex1.id?(e=moment(this.appDate).add(this.calendarNav,"month"),t=this.appDate):(e=moment(this.creneauCollecte.date_string,"YYYY-MM-DD").add(this.calendarNav,"month"),t=moment(this.creneauCollecte.date_string,"YYYY-MM-DD"));var a=new ge(e,t,this.type,this.creneauConfigs,this.currentCreneauType,this.creneauFilters);a.buildDaysOfMonth(),this.listCalanderDays=a.dates,this.calandarTitle=moment(e).locale("fr").format("MMMM  YYYY")}}},Ce=be,De=(a("1e11"),Object(p["a"])(Ce,ve,ye,!1,null,null,null)),we=De.exports,xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("svg",{staticStyle:{"enable-background":"new 0 0 122.88 122.88"},attrs:{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 122.88 122.88","xml:space":"preserve"}},[a("g",[a("path",{attrs:{d:"M81.61,4.73c0-2.61,2.58-4.73,5.77-4.73c3.19,0,5.77,2.12,5.77,4.73v20.72c0,2.61-2.58,4.73-5.77,4.73 c-3.19,0-5.77-2.12-5.77-4.73V4.73L81.61,4.73z M66.11,103.81c-0.34,0-0.61-1.43-0.61-3.2c0-1.77,0.27-3.2,0.61-3.2H81.9 c0.34,0,0.61,1.43,0.61,3.2c0,1.77-0.27,3.2-0.61,3.2H66.11L66.11,103.81z M15.85,67.09c-0.34,0-0.61-1.43-0.61-3.2 c0-1.77,0.27-3.2,0.61-3.2h15.79c0.34,0,0.61,1.43,0.61,3.2c0,1.77-0.27,3.2-0.61,3.2H15.85L15.85,67.09z M40.98,67.09 c-0.34,0-0.61-1.43-0.61-3.2c0-1.77,0.27-3.2,0.61-3.2h15.79c0.34,0,0.61,1.43,0.61,3.2c0,1.77-0.27,3.2-0.61,3.2H40.98 L40.98,67.09z M66.11,67.09c-0.34,0-0.61-1.43-0.61-3.2c0-1.77,0.27-3.2,0.61-3.2H81.9c0.34,0,0.61,1.43,0.61,3.2 c0,1.77-0.27,3.2-0.61,3.2H66.11L66.11,67.09z M91.25,67.09c-0.34,0-0.61-1.43-0.61-3.2c0-1.77,0.27-3.2,0.61-3.2h15.79 c0.34,0,0.61,1.43,0.61,3.2c0,1.77-0.27,3.2-0.61,3.2H91.25L91.25,67.09z M15.85,85.45c-0.34,0-0.61-1.43-0.61-3.2 c0-1.77,0.27-3.2,0.61-3.2h15.79c0.34,0,0.61,1.43,0.61,3.2c0,1.77-0.27,3.2-0.61,3.2H15.85L15.85,85.45z M40.98,85.45 c-0.34,0-0.61-1.43-0.61-3.2c0-1.77,0.27-3.2,0.61-3.2h15.79c0.34,0,0.61,1.43,0.61,3.2c0,1.77-0.27,3.2-0.61,3.2H40.98 L40.98,85.45z M66.11,85.45c-0.34,0-0.61-1.43-0.61-3.2c0-1.77,0.27-3.2,0.61-3.2H81.9c0.34,0,0.61,1.43,0.61,3.2 c0,1.77-0.27,3.2-0.61,3.2H66.11L66.11,85.45z M91.25,85.45c-0.34,0-0.61-1.43-0.61-3.2c0-1.77,0.27-3.2,0.61-3.2h15.79 c0.34,0,0.61,1.43,0.61,3.2c0,1.77-0.27,3.2-0.61,3.2H91.25L91.25,85.45z M15.85,103.81c-0.34,0-0.61-1.43-0.61-3.2 c0-1.77,0.27-3.2,0.61-3.2h15.79c0.34,0,0.61,1.43,0.61,3.2c0,1.77-0.27,3.2-0.61,3.2H15.85L15.85,103.81z M40.98,103.81 c-0.34,0-0.61-1.43-0.61-3.2c0-1.77,0.27-3.2,0.61-3.2h15.79c0.34,0,0.61,1.43,0.61,3.2c0,1.77-0.27,3.2-0.61,3.2H40.98 L40.98,103.81z M29.61,4.73c0-2.61,2.58-4.73,5.77-4.73s5.77,2.12,5.77,4.73v20.72c0,2.61-2.58,4.73-5.77,4.73 s-5.77-2.12-5.77-4.73V4.73L29.61,4.73z M6.4,45.32h110.07V21.47c0-0.8-0.33-1.53-0.86-2.07c-0.53-0.53-1.26-0.86-2.07-0.86H103 c-1.77,0-3.2-1.43-3.2-3.2c0-1.77,1.43-3.2,3.2-3.2h10.55c2.57,0,4.9,1.05,6.59,2.74c1.69,1.69,2.74,4.02,2.74,6.59v27.06v65.03 c0,2.57-1.05,4.9-2.74,6.59c-1.69,1.69-4.02,2.74-6.59,2.74H9.33c-2.57,0-4.9-1.05-6.59-2.74C1.05,118.45,0,116.12,0,113.55V48.52 V21.47c0-2.57,1.05-4.9,2.74-6.59c1.69-1.69,4.02-2.74,6.59-2.74H20.6c1.77,0,3.2,1.43,3.2,3.2c0,1.77-1.43,3.2-3.2,3.2H9.33 c-0.8,0-1.53,0.33-2.07,0.86c-0.53,0.53-0.86,1.26-0.86,2.07V45.32L6.4,45.32z M116.48,51.73H6.4v61.82c0,0.8,0.33,1.53,0.86,2.07 c0.53,0.53,1.26,0.86,2.07,0.86h104.22c0.8,0,1.53-0.33,2.07-0.86c0.53-0.53,0.86-1.26,0.86-2.07V51.73L116.48,51.73z M50.43,18.54 c-1.77,0-3.2-1.43-3.2-3.2c0-1.77,1.43-3.2,3.2-3.2h21.49c1.77,0,3.2,1.43,3.2,3.2c0,1.77-1.43,3.2-3.2,3.2H50.43L50.43,18.54z"}})])])},ke=[],Me={name:"SvgCalandar"},Te=Me,Oe=Object(p["a"])(Te,xe,ke,!1,null,null,null),Le=Oe.exports,je={name:"Creneau",props:{title:{type:String,required:!0},classes:{type:String,default:"rond-left"},type:{type:String,required:!0}},components:{hours:me,calendar:we,SvgCalandar:Le},data:function(){return{showCalandar:!1}},computed:Object(c["a"])(Object(c["a"])({},Object(l["c"])(["creneauCollecte","creneauLivraison","creneauConfigs"])),{},{appDateDisplay:{get:function(){return"livraison"===this.type&&this.creneauLivraison.date_string?moment(this.creneauLivraison.date_string,"YYYY-MM-DD").locale("fr").format("dddd Do MMMM"):"collecte"===this.type&&this.creneauCollecte.date_string?moment(this.creneauCollecte.date_string,"YYYY-MM-DD").locale("fr").format("dddd Do MMMM"):""}}}),methods:{selectNextDay:function(){this.$refs.calendar.selectSpecifiqDateActive()}}},Se=je,Ye=Object(p["a"])(Se,K,Z,!1,null,null,null),He=Ye.exports,Pe=(a("b680"),a("466d"),a("5319"),a("498a"),a("bfb1")),Ae={show_cover:!1,cart:null,creneauTypes:ie["a"].state.creneauType,creneauConfigs:ie["a"].state.creneauConfigs,CartTypeLivraison:"",TypeLivraison:{},show_alert:!1,creneauCollecte:ie["a"].state.creneauCollecte,creneauLivraison:ie["a"].state.creneauLivraison,location:ie["a"].state.location,alert_attribut_class:"alert-primary",ShopifyFormatMoney:function(e,t){var a="",n=/\{\{\s*(\w+)\s*\}\}/,r=t||this.money_format;function i(e,t){return"undefined"==typeof e?t:e}function s(e,t,a,n){if(t=i(t,2),a=i(a,","),n=i(n,"."),isNaN(e)||null==e)return 0;e=(e/100).toFixed(t);var r=e.split("."),s=r[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+a),o=r[1]?n+r[1]:"";return s+o}switch("string"==typeof e&&(e=e.replace(".","")),r.match(n)[1]){case"amount":a=s(e,2);break;case"amount_no_decimals":a=s(e,0);break;case"amount_with_comma_separator":a=s(e,2,".",",");break;case"amount_no_decimals_with_comma_separator":a=s(e,0,".",",");break}return r.replace(n,a)},addProduct:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.show_cover=!0,new Promise((function(n,r){t.show_cover=!0,Pe["a"].post("/cart/add",{id:e,quantity:a}).then((function(e){t.show_cover=!1,n(e)})).catch((function(){t.show_cover=!1,r(!1)}))}))},verification:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return ie["a"].state.alert_message="",e.show_alert=!1,t.next=4,e.VerificationCrenaux();case 4:return a=t.sent,t.next=7,e.VerificationAddress();case 7:return n=t.sent,t.next=10,e.ValidationMontant();case 10:if(r=t.sent,!(a&&n&&r)){t.next=15;break}return t.abrupt("return",!0);case 15:return e.show_alert=!0,e.alert_attribut_class="alert-danger ml-md-4",t.abrupt("return",!1);case 18:case"end":return t.stop()}}),t)})))()},VerificationCrenaux:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=!0,n=!0,e.creneauCollecte.date&&e.creneauCollecte.hour||(n=!1,ie["a"].state.alert_message+="- Vous devez selectionner un creneau pour la collecte.<br />"),e.creneauLivraison.date&&e.creneauLivraison.date||(a=!1,ie["a"].state.alert_message+="- Vous devez selectionner un creneau pour la livraison.<br />"),!a||!n){t.next=8;break}return t.abrupt("return",!0);case 8:return t.abrupt("return",!1);case 9:case"end":return t.stop()}}),t)})))()},VerificationAddress:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.location.current_address){t.next=4;break}return t.abrupt("return",!0);case 4:return ie["a"].state.alert_message+=" - Vous devez selectionner une adresse. <br /> ",t.abrupt("return",!1);case 6:case"end":return t.stop()}}),t)})))()},ValidationMontant:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=10*parseFloat(e.creneauConfigs.montant_min),n=function(t){var a,n=/\{\{(.*?)\}\}/g,r=0;while(null!==(a=n.exec(t))&&r<10){r++;var i=a[1].trim(" ");t=t.replace(a[0],void 0!==e.creneauConfigs[i]?e.creneauConfigs[i]:"...")}return t},!(a>=e.cart.total_price)){t.next=5;break}return ie["a"].state.alert_message+=n(e.creneauConfigs.text_alert_montant_min),t.abrupt("return",!1);case 5:return t.abrupt("return",!0);case 6:case"end":return t.stop()}}),t)})))()},buildAttribut:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,r,i,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="Livraison",a+="\r\n",a+="Date :"+e.creneauLivraison.date.format("DD-MM-YYYY HH:mm:ss"),a+="\r\n",a+="Creneau :"+e.creneauLivraison.hour.begin+" - "+e.creneauLivraison.hour.end,n="Collecte",n+="\r\n",n+="Date :"+e.creneauCollecte.date.format("DD-MM-YYYY HH:mm:ss"),n+="\r\n",n+="Creneau :"+e.creneauCollecte.hour.begin+" - "+e.creneauCollecte.hour.end,r=e.creneauCollecte.date.format("DD-MM-YYYY"),i=e.creneauCollecte.hour.begin+" - "+e.creneauCollecte.hour.end,s=e.creneauLivraison.date.format("DD-MM-YYYY"),o=e.creneauLivraison.hour.begin+" - "+e.creneauLivraison.hour.end,t.abrupt("return",{attributes:{localisation:e.location.current_address,recuperation:n,livraison:a,z_collecte_date:r,z_collecte_heure:i,z_livraison_date:s,z_livraison_heure:o}});case 15:case"end":return t.stop()}}),t)})))()},SaveAttributeCart:function(e){var t=this;return new Promise((function(a,n){t.show_cover=!0,Pe["a"].post("/cart/update",e).then((function(e){t.show_cover=!1,a(e)})).catch((function(e){t.show_cover=!1,Pe["a"].isLocalDev?a(e):n()}))}))},saveOnExternalServer:function(e){return new Promise((function(t,a){Pe["a"].post("https://habeuk.online/shopify-api-rest/add-creneau-reserve",e.attributes,{params:{shop:window.ShopId}}).then((function(e){t(e)})).catch((function(e){a()}))}))},triggerCheckout:function(){document.querySelector(".creneaux-mbt .cart-checkout .submit-cart").click(),console.log("verfication de la presence du bouton formulaire ",document.querySelector(".creneaux-mbt .cart-checkout .submit-cart"))},deleteUpdateProduct:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(n,r){var i={updates:{}};t.show_cover=!0,i.updates[e]=0,Pe["a"].post("/cart/update",i).then((function(){a?n(t.addProduct(a)):(t.show_cover=!1,n(!0))})).catch((function(){t.show_cover=!1,r()}))}))}};Pe["a"].TestDomain="http://habeuk.kksa";var Be=Object(c["a"])(Object(c["a"])({},Ae),{},{initcreneau:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.HideStaticLoading(),a.next=3,t.loadcart();case 3:if(n=a.sent,!n){a.next=20;break}return a.next=7,t.getProductType();case 7:if(!t.TypeLivraison){a.next=20;break}if(!t.CartTypeLivraison||!t.CartTypeLivraison.id||t.CartTypeLivraison.id===t.TypeLivraison.id){a.next=16;break}return e&&t.apply_type_livraison_by_id(t.CartTypeLivraison.id),a.next=12,t.deleteUpdateProduct(t.CartTypeLivraison.id,t.TypeLivraison.id);case 12:return a.next=14,t.loadcart();case 14:a.next=19;break;case 16:if(!t.TypeLivraison||t.CartTypeLivraison.id){a.next=19;break}return a.next=19,t.addDefaultProductTypeLivraison();case 19:t.setEvant();case 20:case"end":return a.stop()}}),a)})))()},HideStaticLoading:function(){},loadcart:function(){var e=this;return new Promise((function(t,a){e.show_cover=!0,Pe["a"].get("/cart.js").then((function(a){console.log("Panier textStatus : ",a),e.show_cover=!1,e.cart=a.data,t(!0)})).catch((function(){Pe["a"].isLocalDev?t(!1):a()}))}))},getProductType:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.cart&&e.cart.item_count>0)){t.next=13;break}a=e.typeLivraisonIds(),t.t0=regeneratorRuntime.keys(e.cart.items);case 3:if((t.t1=t.t0()).done){t.next=11;break}if(n=t.t1.value,r=e.cart.items[n],!a.includes(r.id)){t.next=9;break}return e.CartTypeLivraison=r,t.abrupt("return",r);case 9:t.next=3;break;case 11:t.next=14;break;case 13:return t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t)})))()},typeLivraisonIds:function(){var e=[];return this.creneauTypes.forEach((function(t){e.push(t.id)})),e},apply_type_livraison_by_id:function(e){for(var t in this.creneauTypes)e==this.creneauTypes[t].id&&ie["a"].dispatch("SelectTypeTab",parseInt(t))},addDefaultProductTypeLivraison:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.addProduct(e.TypeLivraison.id);case 2:return t.next=4,e.loadcart();case 4:case"end":return t.stop()}}),t)})))()},setEvant:function(){var e=this,t=document.querySelector(".btn.submit-cart-test");t.classList.add("d-inline-block"),t.addEventListener("click",(function(){t.querySelector("i.fa-arrow-right").classList.add("d-none"),t.querySelector("i.fa-refresh").classList.remove("loadding"),t.querySelector("i.fa-refresh").classList.add("fa-spin"),e.SaveCreneau(t)})),document.addEventListener("SaveCreneauxChechout",(function(){e.SaveCreneau(elem)}))},SaveCreneau:function(){var e=arguments,t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var n,r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:null,a.next=3,t.verification();case 3:if(r=a.sent,!r){a.next=25;break}return a.next=7,t.buildAttribut();case 7:return i=a.sent,a.next=10,t.SaveAttributeCart(i);case 10:return t.saveOnExternalServer(i),a.next=13,t.loadcart();case 13:if(!(t.cart&&t.cart.attributes&&t.cart.attributes.livraison)&&t.app_env_prod){a.next=18;break}n.querySelector("i.fa-arrow-right").classList.remove("d-none"),n.querySelector("i.fa-refresh").classList.add("loadding"),a.next=23;break;case 18:return n.classList.add("bg-danger"),t.show_alert=!0,t.alert_attribut_class="alert-danger ml-md-4",ie["a"].state.alert_message+='- Une erreur s"est produite lors de la sauvegarde de vos informations. <br /> Verifier votre connexion et actualiser la page <br />',a.abrupt("return",!1);case 23:a.next=26;break;case 25:n&&(n.classList.add("bg-danger"),n.querySelector("i.fa-refresh").classList.add("loadding"),console.log("store.state.alert_message : ",ie["a"].state.alert_message));case 26:case"end":return a.stop()}}),a)})))()}}),Ee={name:"App",props:{dateDuJour:{type:[String,Object,Date],required:!0}},components:{TabOption:M,InlineDescription:b,AppTitle:f,mapGoogle:U,creneau:He},data:function(){return{CreneauTypeProductId:null,initAuto:!0}},mounted:function(){var e=moment(this.dateDuJour,"DD-MM-YYYY HH:mm:ss");e._isValid&&this.$store.dispatch("SetDateDuJour",e)},computed:Object(c["a"])(Object(c["a"])({},Object(l["c"])(["creneauType","activeType","alert_message"])),{},{appDateDisplay:{get:function(){return"livraison"===this.type&&this.creneauLivraison.date_string?moment(this.creneauLivraison.date_string,"YYYY-MM-DD").locale("fr").format("dddd Do MMMM"):"collecte"===this.type&&this.creneauCollecte.date_string?moment(this.creneauCollecte.date_string,"YYYY-MM-DD").locale("fr").format("dddd Do MMMM"):""}},currentCreneauType:function(){return this.initManageCart(this.creneauType[this.activeType]),this.creneauType[this.activeType]}}),methods:{initManageCart:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.CreneauTypeProductId===e.id){a.next=6;break}return t.CreneauTypeProductId=e.id,Be.TypeLivraison=e,a.next=5,Be.initcreneau(t.initAuto);case 5:t.initAuto=!1;case 6:case"end":return a.stop()}}),a)})))()}}},Re=Ee,Ve=(a("86d8"),Object(p["a"])(Re,i,s,!1,null,null,null));t["default"]=Ve.exports},f1cc:function(e,t,a){}}]);
//# sourceMappingURL=creneauxMylittlepressing.umd.min.4.js.map