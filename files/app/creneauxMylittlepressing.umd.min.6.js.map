{"version":3,"sources":["webpack://creneauxMylittlepressing/../map-google-location/src/AppPopUpMap.vue?e875","webpack://creneauxMylittlepressing/../map-google-location/src/components/mapgoogle.vue?6a35","webpack://creneauxMylittlepressing/../map-google-location/src/components/config.js","webpack://creneauxMylittlepressing/../map-google-location/src/components/mapgoogle.vue","webpack://creneauxMylittlepressing/../map-google-location/src/components/mapgoogle.vue?fc24","webpack://creneauxMylittlepressing/../map-google-location/src/components/mapgoogle.vue?e2d4","webpack://creneauxMylittlepressing/../map-google-location/src/AppPopUpMap.vue","webpack://creneauxMylittlepressing/../map-google-location/src/AppPopUpMap.vue?1036","webpack://creneauxMylittlepressing/../map-google-location/src/AppPopUpMap.vue?2850","webpack://creneauxMylittlepressing/../map-google-location/src/AppPopUpMap.vue?4a7e"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","attrs","configs","etapeCheckout","actionAfter","on","update_location","staticRenderFns","staticClass","_v","_s","titre_map","value","$event","micromodal","close","directives","name","rawName","expression","placeholder","domProps","target","composing","current_address","save_localisation_cookie","apiKey","GoogleObejct","createGoogleObject","loader","Loader","version","libraries","Promise","resolv","load","then","google","catch","e","console","log","extractPathForPolygon","geoString","geojson","JSON","parse","points","features","geometry","coordinates","i","point","push","lat","lng","convertNewLineToArray","string","serach","split","map","item","trim","props","type","Object","required","displayMarker","image","urlGood","urlBad","Boolean","default","data","id_html","villes","config","list_box","bps","lon","point_in_polygon","point_in_ville","point_in_box","titre_popup","valide_text","mounted","$store","state","location","methods","openPopupMap","show","closePopupMap","getPlace","self","input","document","querySelector","options","componentRestrictions","types","strictBounds","maps","event","addListener","initMap","Map","setMarker","window","setTimeout","centerPosition","getCenter","city_on_map","obtenir_address_proche","buildpolygon","valide_selection","updateMap","place","panTo","check_if_new_adress_in_polygon","check_if_new_adress_in_villes","check_if_new_adress_in_box","latlng","LatLng","geocoder","geocode","status","results","formatted_address","getNameVilleFromPlace","marker","Marker","position","icon","dispatch","alert","locality","route","$emit","href","click","polygon","Polygon","path","zone_valide","geodesic","strokeColor","strokeOpacity","strokeWeight","fillColor","fillOpacity","setMap","latLng","view","ar_ville","length","indexOf","ville","type_limitation","ville_in_box","address_components","components","long_name","component","store","mapgoogle","computed","openModal","$refs","l"],"mappings":"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","file":"creneauxMylittlepressing.umd.min.6.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('mapgoogle',{ref:\"mapgoogle\",attrs:{\"configs\":_vm.configs,\"etape-checkout\":_vm.etapeCheckout,\"action-after\":_vm.actionAfter},on:{\"update_location\":_vm.update_location}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('section',{staticClass:\"modal micromodal-slide\",attrs:{\"id\":\"map-popup-wbu\"}},[_c('div',{staticClass:\"modal__overlay\"},[_c('div',{staticClass:\"modal__container\",attrs:{\"role\":\"dialog\",\"aria-modal\":\"true\",\"aria-labelledby\":\"modal-1-title\"}},[_c('header',{staticClass:\"modal__header\"},[_c('h2',{staticClass:\"modal__title\",attrs:{\"id\":\"modal-1-title\"}},[_vm._v(\" \"+_vm._s(_vm.configs.titre_map.value)+\" \")]),_c('a',{staticClass:\"modal__close\",attrs:{\"href\":\"#\",\"rel\":\"modal:close\"},on:{\"click\":function($event){return _vm.micromodal.close('map-popup-wbu')}}})]),_c('main',{staticClass:\"modal__content\",attrs:{\"id\":\"modal-1-content\"}},[_c('div',{staticClass:\"m-0 p-0 container-map\"},[_c('div',{attrs:{\"id\":\"map-display-wbu\"}}),_c('div',{staticClass:\"text-over-lay\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.current_address),expression:\"current_address\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":_vm.placeholder,\"id\":\"map-input-over\"},domProps:{\"value\":(_vm.current_address)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.current_address=$event.target.value}}})]),_c('div',{staticClass:\"center-marker\"}),_c('div',{staticClass:\"address-confirm\"},[_c('button',{staticClass:\"btn btn-lg bg-cl1\",on:{\"click\":_vm.save_localisation_cookie}},[_vm._v(\" Confirmer l'adresse \")])])])])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { Loader } from \"@googlemaps/js-api-loader\";\nexport default {\n  apiKey: \"AIzaSyDurloZ0-xj8CNrQwkeSc53A-_n35Xji2Y\",\n  GoogleObejct: null,\n  /**\n   * On charge la map\n   */\n  createGoogleObject() {\n    const loader = new Loader({\n      apiKey: this.apiKey,\n      version: \"weekly\",\n      libraries: [\"places\", \"geometry\"]\n    });\n    return new Promise(resolv => {\n      loader\n        .load()\n        .then(google => {\n          this.GoogleObejct = google;\n          resolv(google);\n        })\n        .catch(e => {\n          console.log(\"Erreur initialisation de la MAP : \", e);\n        });\n    });\n  },\n  extractPathForPolygon(geoString) {\n    const geojson = JSON.parse(geoString);\n    const points = [];\n    if (\n      geojson.features &&\n      geojson.features[0] &&\n      geojson.features[0].geometry &&\n      geojson.features[0].geometry.coordinates\n    ) {\n      for (const i in geojson.features[0].geometry.coordinates[0]) {\n        const point = geojson.features[0].geometry.coordinates[0][i];\n        points.push({ lat: point[1], lng: point[0] });\n      }\n    }\n    return points;\n  },\n  /**\n   * Permet de slpit and trim chaque elment;\n   * @param {*} string\n   */\n  convertNewLineToArray(string, serach = \"\\n\") {\n    return string.split(serach).map(item => item.trim());\n  }\n};\n","<!--\n    S'ouvre par defaut dans une popup.\n-->\n<template>\n  <div>\n    <!-- https://micromodal.vercel.app/ -->\n    <section class=\"modal micromodal-slide\" id=\"map-popup-wbu\">\n      <div class=\"modal__overlay\">\n        <div\n          class=\"modal__container\"\n          role=\"dialog\"\n          aria-modal=\"true\"\n          aria-labelledby=\"modal-1-title\"\n        >\n          <header class=\"modal__header\">\n            <h2 class=\"modal__title\" id=\"modal-1-title\">\n              {{ configs.titre_map.value }}\n            </h2>\n\n            <a\n              href=\"#\"\n              class=\"modal__close\"\n              rel=\"modal:close\"\n              @click=\"micromodal.close('map-popup-wbu')\"\n            ></a>\n          </header>\n          <main class=\"modal__content\" id=\"modal-1-content\">\n            <div class=\"m-0 p-0 container-map\">\n              <div id=\"map-display-wbu\"></div>\n              <div class=\"text-over-lay\">\n                <input\n                  class=\"form-control\"\n                  type=\"text\"\n                  v-model=\"current_address\"\n                  :placeholder=\"placeholder\"\n                  id=\"map-input-over\"\n                />\n              </div>\n              <div class=\"center-marker\"></div>\n              <div class=\"address-confirm\">\n                <button\n                  class=\"btn btn-lg bg-cl1\"\n                  @click=\"save_localisation_cookie\"\n                >\n                  Confirmer l'adresse\n                </button>\n              </div>\n            </div>\n          </main>\n        </div>\n      </div>\n    </section>\n  </div>\n</template>\n\n<script>\nimport config from \"./config.js\";\nimport micromodal from \"micromodal\";\n\nexport default {\n  name: \"Mapgoogle\",\n  props: {\n    configs: {\n      type: Object,\n      required: true\n    },\n    displayMarker: { type: Boolean, default: true },\n    image: { type: String, default: \"/localisation/img/marker.png\" },\n    urlGood: { type: String, default: \"/cart\" },\n    urlBad: { type: String, default: \"/pages/map-error\" },\n    etapeCheckout: {\n      type: Boolean,\n      default: true\n    },\n    actionAfter: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      id_html: \"map-google-field\",\n      villes: config.convertNewLineToArray(this.configs.villes.value, \";\"),\n      list_box: config.convertNewLineToArray(this.configs.bps.value),\n      micromodal: micromodal,\n      map: null,\n      lat: 45.7941459,\n      lon: 4.68941940000002,\n      point_in_polygon: false,\n      point_in_ville: false,\n      point_in_box: false,\n      titre_popup: \"Merci de confirmer votre adresse\",\n      current_address: \"\",\n      valide_text: \"Commander maintenant\",\n      placeholder: \"Entrez votre adresse\"\n    };\n  },\n  mounted() {\n    this.point_in_box = false;\n    this.point_in_polygon = false;\n    this.point_in_ville = false;\n    this.createGoogleObject();\n    this.current_address = this.$store.state.location.current_address\n      ? this.$store.state.location.current_address\n      : \"\";\n  },\n  methods: {\n    openPopupMap() {\n      this.micromodal.show(\"map-popup-wbu\");\n    },\n    closePopupMap() {\n      this.micromodal.close(\"map-popup-wbu\");\n    },\n    /**\n     * On charge la map\n     */\n    createGoogleObject() {\n      config.createGoogleObject().then(google => {\n        this.GoogleObejct = google;\n        this.getPlace();\n        this.initMap();\n        this.geocoder = new this.GoogleObejct.maps.Geocoder();\n      });\n    },\n    /**\n     * Permet d'ajouter la recherche de ville sur le champs qui est rattaché.\n     */\n    getPlace() {\n      var self = this;\n      /**\n       * Pour obtenir les coordonnées\n       * https://www.mapcoordinates.net/fr\n       */\n      var input = document.querySelector(\"#map-input-over\");\n      this.options = {\n        componentRestrictions: { country: [\"fr\"] },\n        types: [\"address\"],\n        strictBounds: true\n      };\n\n      const autocomplete = new this.GoogleObejct.maps.places.Autocomplete(\n        input,\n        this.options\n      );\n      this.GoogleObejct.maps.event.addListener(\n        autocomplete,\n        \"place_changed\",\n        function() {\n          var place = autocomplete.getPlace();\n\n          if (place && place.formatted_address) {\n            self.current_address = place.formatted_address;\n            self.city_on_map = place.vicinity;\n            self.updateMap(place);\n            self.openPopupMap();\n          }\n        }\n      );\n    },\n    initMap() {\n      var self = this;\n      var lat = this.lat;\n      var lon = this.lon;\n      // CrÃ©er l'objet \"map\" et l'insÃ¨rer dans l'Ã©lÃ©ment HTML qui a l'ID \"map\"\n      this.map = new this.GoogleObejct.maps.Map(\n        document.getElementById(\"map-display-wbu\"),\n        {\n          // Nous plaÃ§ons le centre de la carte avec les coordonnÃ©es ci-dessus\n          center: new this.GoogleObejct.maps.LatLng(lat, lon),\n          // Nous dÃ©finissons le zoom par dÃ©faut\n          zoom: 17,\n          // Nous dÃ©finissons le type de carte (ici carte routiÃ¨re)\n          mapTypeId: this.GoogleObejct.maps.MapTypeId.ROADMAP,\n          // Nous activons les options de contrÃ´le de la carte (plan, satellite...)\n          mapTypeControl: false,\n          // Nous dÃ©sactivons la roulette de souris\n          scrollwheel: false,\n\n          mapTypeControlOptions: {\n            // Cette option sert Ã  dÃ©finir comment les options se placent\n            style: this.GoogleObejct.maps.MapTypeControlStyle.HORIZONTAL_BAR\n          },\n\n          // Activation des options de navigation dans la carte (zoom...)\n          navigationControl: false,\n          panControl: false,\n          zoomControl: true,\n          streetViewControl: false,\n          fullscreenControl: false,\n\n          navigationControlOptions: {\n            // Comment ces options doivent-elles s'afficher\n            style: this.GoogleObejct.maps.NavigationControlStyle.ZOOM_PAN\n          },\n          styles: [\n            //desactive les localisations.\n            /*\n          \t{\n              featureType: 'poi',\n              elementType: 'labels.icon',\n              stylers: [\n                {visibility: 'off'}\n              ]\n            },\n            */\n            // couleur du texte.\n            /*\n          \t{\n              featureType: 'poi',\n              elementType: 'labels.text.fill',\n              stylers: [\n              \t{color: '#ffffff'}\n              ]\n            },\n            */\n            {\n              featureType: \"poi\",\n              elementType: \"labels.text.stroke\",\n              stylers: [{ visibility: \"off\" }]\n            },\n            {\n              featureType: \"landscape.natural\",\n              elementType: \"geometry\",\n              stylers: [{ color: \"#b8cb92\" }]\n            },\n            {\n              featureType: \"landscape.man_made\",\n              elementType: \"geometry\",\n              stylers: [{ color: \"#ece2d9\" }]\n            },\n            {\n              featureType: \"road\",\n              elementType: \"geometry\",\n              stylers: [{ color: \"#ffffff\" }]\n            },\n            {\n              featureType: \"road.highway\",\n              elementType: \"labels\",\n              stylers: [{ visibility: \"off\" }]\n            }\n          ]\n        }\n      );\n      this.setMarker();\n      this.map.addListener(\"dragend\", function() {\n        window.setTimeout(function() {\n          var centerPosition = self.map.getCenter();\n          if (centerPosition) {\n            self.lat = centerPosition.lat();\n            self.lon = centerPosition.lng();\n            self.city_on_map = \"\";\n\n            self.obtenir_address_proche();\n          }\n        }, 1000);\n      });\n      this.buildpolygon();\n      this.valide_selection();\n    },\n    updateMap: function(place) {\n      if (place.geometry) {\n        this.map.panTo(place.geometry.location);\n        this.lat = place.geometry.location.lat();\n        this.lon = place.geometry.location.lng();\n        this.setMarker();\n        this.valide_selection();\n      }\n    },\n    valide_selection() {\n      this.check_if_new_adress_in_polygon();\n      this.check_if_new_adress_in_villes();\n      this.check_if_new_adress_in_box();\n    },\n    obtenir_address_proche() {\n      var self = this;\n      var latlng = new this.GoogleObejct.maps.LatLng(this.lat, this.lon);\n      this.geocoder.geocode({ location: latlng }, function(results, status) {\n        if (status == \"OK\") {\n          self.current_address = results[0].formatted_address;\n          self.updateMap(results[0]);\n          self.getNameVilleFromPlace(results[0]);\n        }\n      });\n    },\n    setMarker() {\n      if (!this.displayMarker) {\n        return false;\n      }\n      var self = this;\n      var lat = this.lat;\n      var lon = this.lon;\n      // Nous ajoutons un marqueur\n      this.marker = new this.GoogleObejct.maps.Marker({\n        position: { lat: lat, lng: lon },\n        map: self.map,\n        icon: this.image\n      });\n    },\n    save_localisation_cookie() {\n      if (this.current_address == \"\") {\n        //localStorage.removeItem(\"wbu_localisation_map\");\n        this.$store.dispatch(\"setLocation\", \"\");\n        alert(\"Vous devez definir une adresse\");\n        return false;\n      }\n      if (this.point_in_polygon && this.point_in_ville && this.point_in_box) {\n        /*\n        localStorage.setItem(\n          \"wbu_localisation_map\",\n          JSON.stringify(this.current_address)\n        );\n        localStorage.setItem(\n          \"wbu_localisation_city\",\n          JSON.stringify(this.city_on_map)\n        );\n        localStorage.setItem(\"wbu_locality\", this.locality);\n        localStorage.setItem(\"wbu_route\", this.route);\n        /** */\n        const location = {\n          current_address: this.current_address,\n          city_on_map: this.city_on_map,\n          locality: this.locality,\n          route: this.route\n        };\n        this.$store.dispatch(\"setLocation\", location);\n        this.$emit(\"update_location\", location);\n        // IMPORTANT;\n        //$(document).trigger(\"adresseUpdate\");\n        if (this.etapeCheckout) {\n          window.location.href = this.urlGood;\n        } else {\n          document.querySelector(\".modal__close\").click();\n          if (this.actionAfter) {\n            document.querySelector(\".button.cart-checkout-custom\").click();\n          }\n        }\n      } else {\n        //localStorage.removeItem(\"wbu_localisation_map\");\n        //localStorage.removeItem(\"wbu_localisation_city\");\n        // IMPORANT;\n        //$(document).trigger(\"adresseUpdate\");\n        this.$store.dispatch(\"setLocation\", \"\");\n        window.location.href = this.urlBad;\n      }\n    },\n    /**\n     * -\n     */\n    buildpolygon() {\n      this.polygon = new this.GoogleObejct.maps.Polygon({\n        path: config.extractPathForPolygon(this.configs.zone_valide.value),\n        geodesic: true,\n        strokeColor: \"#48a0d9\",\n        strokeOpacity: 0.5,\n        strokeWeight: 4,\n        fillColor: \"#48a0d9\",\n        fillOpacity: 0.15\n      });\n      this.polygon.setMap(this.map);\n    },\n    check_if_new_adress_in_polygon() {\n      var latLng = new this.GoogleObejct.maps.LatLng(this.lat, this.lon);\n      if (\n        this.GoogleObejct.maps.geometry.poly.containsLocation(\n          latLng,\n          this.polygon\n        )\n      ) {\n        this.point_in_polygon = true;\n      } else {\n        this.point_in_polygon = false;\n      }\n    },\n    check_if_new_adress_in_villes() {\n      const ville_in_name = () => {\n        var view = false;\n        if (this.current_address && this.current_address.length > 0) {\n          var ar_ville = this.current_address.split(\",\");\n          if (ar_ville[1].length > 0) {\n            this.villes.forEach(ville => {\n              if (ar_ville[1].indexOf(ville) >= 0) {\n                view = true;\n              }\n            });\n          }\n        }\n        return view;\n      };\n      //Check if is valide\n      if (this.type_limitation != \"polygon_ville\") {\n        this.point_in_ville = true;\n        return false;\n      }\n      if (this.villes.indexOf(this.city_on_map) >= 0) {\n        this.point_in_ville = true;\n        return true;\n      } else if (ville_in_name()) {\n        this.point_in_ville = true;\n        return true;\n      } else {\n        this.point_in_ville = false;\n      }\n    },\n    /**\n     * -\n     */\n    check_if_new_adress_in_box() {\n      const ville_in_box = () => {\n        var view = false;\n        if (this.current_address && this.current_address.length > 0) {\n          if (this.current_address) {\n            this.list_box.forEach(box => {\n              if (this.current_address.indexOf(box) >= 0) {\n                view = true;\n              }\n            });\n          }\n        }\n        return view;\n      };\n      if (this.type_limitation != \"polygon_box\") {\n        this.point_in_box = true;\n        return false;\n      }\n      if (ville_in_box()) {\n        this.point_in_box = true;\n        return true;\n      } else {\n        this.point_in_box = false;\n        return true;\n      }\n    },\n    /**\n     * -\n     */\n    getNameVilleFromPlace(place) {\n      var route = \"\";\n      var locality = \"\";\n      if (place.address_components) {\n        for (const i in place.address_components) {\n          var components = place.address_components[i];\n          if (\n            components.types &&\n            components.types.includes(\"locality\") &&\n            locality == \"\"\n          ) {\n            locality = components.long_name;\n          }\n          if (\n            components.types &&\n            components.types.includes(\"route\") &&\n            route == \"\"\n          ) {\n            route = components.long_name;\n          }\n        }\n        this.route = route;\n        this.locality = locality;\n      }\n    }\n  }\n};\n</script>\n","import mod from \"-!../../../creneaux-reservation/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../creneaux-reservation/node_modules/thread-loader/dist/cjs.js!../../../creneaux-reservation/node_modules/babel-loader/lib/index.js!../../../creneaux-reservation/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../creneaux-reservation/node_modules/vue-loader/lib/index.js??vue-loader-options!./mapgoogle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../creneaux-reservation/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../creneaux-reservation/node_modules/thread-loader/dist/cjs.js!../../../creneaux-reservation/node_modules/babel-loader/lib/index.js!../../../creneaux-reservation/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../creneaux-reservation/node_modules/vue-loader/lib/index.js??vue-loader-options!./mapgoogle.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./mapgoogle.vue?vue&type=template&id=b2168960&\"\nimport script from \"./mapgoogle.vue?vue&type=script&lang=js&\"\nexport * from \"./mapgoogle.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../creneaux-reservation/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <mapgoogle\n    ref=\"mapgoogle\"\n    :configs=\"configs\"\n    :etape-checkout=\"etapeCheckout\"\n    :action-after=\"actionAfter\"\n    @update_location=\"update_location\"\n  >\n  </mapgoogle>\n</template>\n\n<script>\nimport store from \"./store\";\nimport { mapState } from \"vuex\";\nimport mapgoogle from \"./components/mapgoogle.vue\";\nexport default {\n  name: \"AppPopUpMap\",\n  store,\n  props: {\n    etapeCheckout: {\n      type: Boolean,\n      required: true\n    },\n    actionAfter: {\n      type: Boolean,\n      required: true\n    }\n  },\n  components: {\n    mapgoogle\n  },\n  computed: {\n    ...mapState([\"configs\"])\n  },\n\n  methods: {\n    openModal() {\n      this.$refs.mapgoogle.openPopupMap();\n    },\n    update_location(l) {\n      this.$emit(\"update_location\", l);\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"./components/scss/micromodal.scss\";\n</style>\n","import mod from \"-!../../creneaux-reservation/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../creneaux-reservation/node_modules/thread-loader/dist/cjs.js!../../creneaux-reservation/node_modules/babel-loader/lib/index.js!../../creneaux-reservation/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../creneaux-reservation/node_modules/vue-loader/lib/index.js??vue-loader-options!./AppPopUpMap.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../creneaux-reservation/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../creneaux-reservation/node_modules/thread-loader/dist/cjs.js!../../creneaux-reservation/node_modules/babel-loader/lib/index.js!../../creneaux-reservation/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../creneaux-reservation/node_modules/vue-loader/lib/index.js??vue-loader-options!./AppPopUpMap.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AppPopUpMap.vue?vue&type=template&id=6b7adad7&scoped=true&\"\nimport script from \"./AppPopUpMap.vue?vue&type=script&lang=js&\"\nexport * from \"./AppPopUpMap.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AppPopUpMap.vue?vue&type=style&index=0&id=6b7adad7&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../creneaux-reservation/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6b7adad7\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../creneaux-reservation/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../creneaux-reservation/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../creneaux-reservation/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../creneaux-reservation/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../creneaux-reservation/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../creneaux-reservation/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../creneaux-reservation/node_modules/vue-loader/lib/index.js??vue-loader-options!./AppPopUpMap.vue?vue&type=style&index=0&id=6b7adad7&lang=scss&scoped=true&\""],"sourceRoot":""}