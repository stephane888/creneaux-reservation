(("undefined"!==typeof self?self:this)["webpackJsonpAppAllCreneaux"]=("undefined"!==typeof self?self:this)["webpackJsonpAppAllCreneaux"]||[]).push([[4],{1161:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("creneau",{staticClass:"container first-block ",attrs:{blocks_type_livraisons:e.blocks_type_livraisons,app_env_prod:e.app_env_prod,titre_module:e.titre_module,nombre_res_creneau:e.nombre_res_creneau,collecte_current_date:e.collecte_current_date,livraison_current_date:e.livraison_current_date,nombre_semaine:e.nombre_semaine,plage_heures_valide:e.plage_heures_valide,collecte_jour_desactivee:e.collecte_jour_desactivee,livraison_jour_desactivee:e.livraison_jour_desactivee,collecte_date_desactivee:e.collecte_date_desactivee,livraison_date_desactivee:e.livraison_date_desactivee,disable_heureday:e.disable_heureday,disable_heuredate:e.disable_heuredate,url_get_creneau:e.url_get_creneau,url_save_creneau:e.url_save_creneau,collecte_delai_jour:e.collecte_delai_jour,collecte_interval:e.collecte_interval,livraison_delai_jour:e.livraison_delai_jour,livraison_interval:e.livraison_interval,collecte_deccalage_creneau_depart:e.collecte_deccalage_creneau_depart,filters:e.filters}})],1)},i=[],n=(a("caad"),a("2532"),function(e){var t=window.creneau_configs.days;for(var a in t)if(t[a]&&t[a].indice===e)return t[a]});function s(){var e=[];return window.creneau_heures&&window.creneau_heures.heuredate.length>0&&(e=window.creneau_heures.heuredate),e}function c(){var e=[];return window.creneau_heures&&window.creneau_heures.heureday.length>0&&(e=window.creneau_heures.heureday),e}function o(){var e=[];return window.creneau_configs&&window.creneau_configs.date_desactivee&&window.creneau_configs.date_desactivee.length&&(e=window.creneau_configs.date_desactivee),e}function l(){return window.creneau_configs&&window.creneau_configs.title?window.creneau_configs.title:"Finaliser la commande"}function u(){var e=[0,6];if(window.creneau_configs&&window.creneau_configs.days){e=[];for(var t=0;t<=6;t++){var a=n(t);0===a.value&&e.push(t)}}return e}function _(){var e=[];if(window.creneau_configs&&window.creneau_configs.days&&window.creneau_configs.days.length)for(var t=0;t<=6;t++){var a=n(t);e.push({debut:a.debut,fin:a.fin})}return e}function d(){return window.creneau_configs&&window.creneau_configs.nombre_semaine?parseInt(window.creneau_configs.nombre_semaine):4}function p(){return window.wbu_current_date?window.moment(window.wbu_current_date,"DD-MM-YYYY HH:mm:ss"):window.moment()}function v(){var e=[];return window.creneau_types&&window.creneau_types.typelivraison&&(e=window.creneau_types.typelivraison),e}function f(){return window.creneau_configs&&window.creneau_configs.nombre_res_creneau?parseInt(window.creneau_configs.nombre_res_creneau):2}function h(){return!window.location.host.includes(".kksa")&&!window.location.host.includes("localhost")}function m(){var e="https://www.habeuk.online/api/shopify/creneaux/add.js";return h()&&(e="http://habeuk.kksa/api/shopify/creneaux/add.js"),e}function g(){var e="https://www.habeuk.online/api/shopify/creneaux/checks.js";return h()&&(e="http://habeuk.kksa/api/shopify/creneaux/checks.js"),e}function b(){return window.creneau_configs&&window.creneau_configs.deccalage_creneau_depart>0?window.creneau_configs.deccalage_creneau_depart:0}var y,w={IsProduction:h(),appTitle:l(),nombre_res_creneau:f(),blocks_type_livraisons:v(),current_date:p(),nombre_semaine:d(),plage_heures_valide:_(),jour_desactivee:u(),date_desactivee:o(),disable_heureday:c(),disable_heuredate:s(),url_save_creneau:m(),url_get_creneau:g(),deccalage_creneau_depart:b(),filters:window.creneau_filters&&window.creneau_filters.length?window.creneau_filters:[]},Y=w,x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"creneaux-mbt--block mt-5"},[a("div",[a("h1",{staticClass:"text-left font-weight-bold",domProps:{innerHTML:e._s(e.titre_module)}})]),a("type-livraison",{ref:"typelivraison",attrs:{blocks_type_livraisons:e.blocks_type_livraisons,price_shipping:e.newpriceshipping},on:{ev_change_type_livraison:e.ev_change_type_livraison},scopedSlots:e._u([{key:"alert",fn:function(){return[a("div",{staticClass:"col-md-12 "},[a("alert",{attrs:{show_alert:e.show_alert,alert_message:e.alert_message,alert_attribut_class:e.alert_attribut_class},on:{ev_alert_close:e.alert_close}})],1)]},proxy:!0}])},[[a("div",{staticClass:"col-md-7"},[a("selectionhoraire",{ref:"selectionhoraire",attrs:{collecte_delai_jour:e.collecte_delai_jour,collecte_jour_desactivee:e.collecte_jour_desactivee,collecte_date_desactivee:e.collecte_date_desactivee,collecte_interval:e.collecte_interval,collecte_configs:e.collecte_configs,collecte_current_date:e.collecte_current_date,collecte_deccalage_creneau_depart:e.collecte_deccalage_creneau_depart,livraison_delai_jour:e.livraison_delai_jour,livraison_jour_desactivee:e.livraison_jour_desactivee,livraison_date_desactivee:e.livraison_date_desactivee,livraison_interval:e.livraison_interval,livraison_configs:e.TypeLivraison,livraison_current_date:e.livraison_current_date,nombre_semaine:e.nombre_semaine,nombre_res_creneau:e.nombre_res_creneau,plage_heures_valide:e.plage_heures_valide,disable_heureday:e.disable_heureday,disable_heuredate:e.disable_heuredate,url_get_creneau:e.url_get_creneau,filters:e.filters},on:{ev_creneau_collecte:e.ev_creneau_collecte,ev_creneau_livraison:e.ev_creneau_livraison}})],1)]],2),e.show&&e.show_cover?a("div",{staticClass:"londing-cover dynamique d-flex"},[a("VueLoading",{attrs:{type:"bars",color:"#00a3dd",size:{width:"90px",height:"50px"}}})],1):e._e()],1)])],1)},k=[],j=(a("e260"),a("a9e3"),a("b680"),a("d3b7"),a("e6cf"),a("ac1f"),a("466d"),a("5319"),a("1276"),a("ddb0"),a("96cf"),a("1da1")),M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"block-left"},[e.show_title?a("div",[a("h3",{staticClass:"title",domProps:{innerHTML:e._s(e.titre)}})]):e._e(),a("div",{staticClass:"first-row justify-content-start d-flex text-center"},e._l(e.blocks_type_livraisons,(function(t,r){return a("div",{key:r,staticClass:"option d-flex btn align-items-center",class:[0==r?"option--tl-radius":"option--bdr-right",t.active?"badge-primary":""],on:{click:function(t){return e.select_type_tab(r)}}},[a("div",{staticClass:"mx-auto h2 titre-tab"},[e._v(" "+e._s(t.titre)+" "),r>0?a("span",{staticClass:"small small-text d-block"},[e._v(" "+e._s(t.montant)+"€ ")]):e._e()])])})),0),a("div",{staticClass:"block-border"},[a("div",{staticClass:" row list-inline mt-3 ml-md-4 font-weight-bold type-livraison"},[a("div",{staticClass:"list-inline-item col-md-8",domProps:{innerHTML:e._s(e.active_type_body)}}),e.active_type&&e.active_type.montant?a("div",{staticClass:"list-inline-item col-md-4"},[a("p",[a("span",[e._v(" "+e._s(e.formatString(e.active_type.montant_libele))+" ")])])]):e._e()]),a("div",{staticClass:"row  d-flex justify-content-start commande-detail mb-5 "},[e._t("alert"),a("div",{staticClass:"rectangle rond-left rond-right mx-3 mx-md-0 mb-3 mb-md-0 ml-md-5 mr-lg-5 pt-3 pl-3 pr-3 col-md-3 "},[a("div",{staticClass:"h2 cursor-pointer",on:{click:e.open_map}},[e._v("ADRESSE")]),a("div",{staticClass:"d-flex justify-content-between justify-content-md-start align-items-center "},[a("div",{},[""!=e.city_on_map?a("div",{staticClass:"h1 cursor-pointer",domProps:{innerHTML:e._s(e.city_on_map)},on:{click:e.open_map}}):e._e(),""!=e.current_address?a("p",{staticClass:"cursor-pointer",domProps:{innerHTML:e._s(e.current_address)},on:{click:e.open_map}}):e._e(),""==e.current_address?a("span",{staticClass:"btn btn-primary mt-4 mb-3",on:{click:e.open_map}},[e._v(" Ajouter une adresse ")]):e._e()]),a("div",{staticClass:"icone-map"},[a("map-calandar-svg")],1)])]),e._t("default")],2)])])},D=[],C=(a("498a"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("svg",{staticStyle:{"enable-background":"new 0 0 512.053 512.053"},attrs:{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512.053 512.053","xml:space":"preserve"}},[a("g",[a("g",[a("path",{staticStyle:{fill:"#010002"},attrs:{d:"M365.027,44.5c-30-29.667-66.333-44.5-109-44.5s-79,14.833-109,44.5s-45,65.5-45,107.5\n\t\t\tc0,25.333,12.833,67.667,38.5,127c25.667,59.334,51.333,113.334,77,162s38.5,72.334,38.5,71c4-7.334,9.5-17.334,16.5-30\n\t\t\ts19.333-36.5,37-71.5s33.167-67.166,46.5-96.5c13.334-29.332,25.667-59.667,37-91s17-55,17-71\n\t\t\tC410.027,110,395.027,74.167,365.027,44.5z M289.027,184c-9.333,9.333-20.5,14-33.5,14c-13,0-24.167-4.667-33.5-14\n\t\t\ts-14-20.5-14-33.5s4.667-24,14-33s20.5-13.5,33.5-13.5c13,0,24.167,4.5,33.5,13.5s14,20,14,33S298.36,174.667,289.027,184z"}})])]),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g")])])}),H=[],L={name:"SvgCalandar"},A=L,S=a("2877"),T=Object(S["a"])(A,C,H,!1,null,null,null),P=T.exports;window.jQuery?y=window.jQuery:window.$&&(y=window.$);var O={name:"TypeLivraison",props:{datas:[Object,Array,String,Number],id_html:{type:String,default:""},blocks_type_livraisons:{type:Array},show_title:{type:Boolean,default:!1}},components:{"map-calandar-svg":P},data:function(){return{titre:"Types de livraison",show_adresse:!1,active_type:[],city_on_map:"",current_address:"",wbu_locality:"",wbu_route:""}},mounted:function(){this.select_default_type(),this.getValuesAdress(),this.setEvent()},methods:{open_map:function(){console.log("Trigger open map"),y("#trigger-simple-map3map-google-field").trigger("click")},getValuesAdress:function(){this.current_address="",this.city_on_map="";var e=localStorage.getItem("wbu_localisation_map"),t=localStorage.getItem("wbu_localisation_city");e&&(this.current_address=JSON.parse(e)),t&&(this.city_on_map=JSON.parse(t)),this.wbu_locality=localStorage.getItem("wbu_locality"),this.wbu_route=localStorage.getItem("wbu_route"),""!=this.wbu_locality?this.city_on_map=this.wbu_locality:""!=this.wbu_route&&(this.city_on_map=this.wbu_route)},select_type_tab:function(e){var t=this;if(this.blocks_type_livraisons[e]){for(var a in this.active_type=this.blocks_type_livraisons[e],this.blocks_type_livraisons)this.blocks_type_livraisons[a].active=!1;this.blocks_type_livraisons[e].active=!0,t.$emit("ev_change_type_livraison",t.active_type)}else console.log("error")},display_prise:function(e){return 0==e?"+0€":"+"+e+"€"},select_default_type:function(){for(var e in this.blocks_type_livraisons)if(this.blocks_type_livraisons[e].active){this.active_type=this.blocks_type_livraisons[e],this.$emit("ev_change_type_livraison",this.active_type);break}},setEvent:function(){var e=this;y(document).on("adresseUpdate",(function(){e.getValuesAdress()}))},formatString:function(e){var t,a=/\{\{(.*?)\}\}/g,r=0;while(null!==(t=a.exec(e))&&r<10){r++;var i=t[1].trim(" ");e=e.replace(t[0],this.active_type[i]?this.active_type[i]:"...")}return e}},computed:{active_type_body:{get:function(){return this.active_type&&this.active_type.body?this.formatString(this.active_type.body):""}}}},V=O,R=Object(S["a"])(V,M,D,!1,null,null,null),N=R.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row ml-md-4"},[a("creneau",{ref:"collecte",attrs:{title:e.collecte_title,classes:e.collecte_livraison,delai_jour:e.collecte_delai_jour,jour_desactivee:e.collecte_jour_desactivee,date_desactivee:e.collecte_date_desactivee,interval:e.collecte_interval,configs:e.collecte_configs,current_date:e.collecte_current_date,nombre_semaine:e.nombre_semaine,nombre_res_creneau:e.nombre_res_creneau,plage_heures_valide:e.plage_heures_valide,disable_heureday:e.disable_heureday,disable_heuredate:e.disable_heuredate,url_get_creneau:e.url_get_creneau,type_creneau:"collecte",deccalage_creneau_depart:e.collecte_deccalage_creneau_depart,filters:e.filters},on:{ev_select_current_creneau:e.ev_select_current_creneau_collecte}}),a("creneau",{ref:"livraison",attrs:{title:e.title_livraison,classes:e.classes_livraison,delai_jour:e.livraison_delai_jour,jour_desactivee:e.livraison_jour_desactivee,date_desactivee:e.livraison_date_desactivee,interval:e.livraison_interval,configs:e.livraison_configs,current_date:e.livraison_current_date,nombre_semaine:e.nombre_semaine,nombre_res_creneau:e.nombre_res_creneau,plage_heures_valide:e.plage_heures_valide,disable_heureday:e.disable_heureday,disable_heuredate:e.disable_heuredate,url_get_creneau:e.url_get_creneau,type_creneau:"livraison",filters:e.filters},on:{ev_select_current_creneau:e.ev_select_current_creneau_livraison}})],1)},$=[],z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.classes},[a("div",{staticClass:"title-creneau h2",domProps:{innerHTML:e._s(e.title)}}),a("div",{staticClass:"d-flex justify-content-between justify-content-md-start line-creneau h1"},[a("Hours",{attrs:{app_date_utilisable_string_hour:e.date_string_generate_by_calendar,h_debut:e.h_debut,m_debut:e.m_debut,h_fin:e.h_fin,m_fin:e.m_fin,plage_heures_valide:e.plage_heures_valide,filters:e.filters,configs:e.configs,type_creneau:e.type_creneau,deccalage_creneau_depart:e.deccalage_creneau_depart},on:{select_creneau:e.select_creneau,select_next_day:e.select_next_day}}),a("i",{staticClass:"icone-svg mb-md-1 mb-lg-2 cursor-pointer",on:{click:e.display_hide_calandar}},[a("svg-calandear")],1)],1),a("p",{staticClass:"cursor-pointer",on:{click:e.display_hide_calandar}},[e._v(" "+e._s(e.app_date_display)+" ")]),e.show_calandar?a("div",{staticClass:"over-container-date",on:{click:e.display_hide_calandar}}):e._e(),a("calendar",{directives:[{name:"show",rawName:"v-show",value:e.show_calandar,expression:"show_calandar"}],ref:"calendar",attrs:{app_date_utilisable_string_hour:e.app_date_utilisable_string_hour,filters:e.filters,jour_desactivee:e.jour_desactivee,nombre_semaine:e.nombre_semaine,type_creneau:e.type_creneau,rebuild_creneau:e.rebuild_creneau},on:{select_date:e.select_date_calendar,close_calendar:function(t){e.show_calandar=!1}}})],1)},U=[],E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("svg",{staticStyle:{"enable-background":"new 0 0 122.88 122.88"},attrs:{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 122.88 122.88","xml:space":"preserve"}},[a("g",[a("path",{attrs:{d:"M81.61,4.73c0-2.61,2.58-4.73,5.77-4.73c3.19,0,5.77,2.12,5.77,4.73v20.72c0,2.61-2.58,4.73-5.77,4.73 c-3.19,0-5.77-2.12-5.77-4.73V4.73L81.61,4.73z M66.11,103.81c-0.34,0-0.61-1.43-0.61-3.2c0-1.77,0.27-3.2,0.61-3.2H81.9 c0.34,0,0.61,1.43,0.61,3.2c0,1.77-0.27,3.2-0.61,3.2H66.11L66.11,103.81z M15.85,67.09c-0.34,0-0.61-1.43-0.61-3.2 c0-1.77,0.27-3.2,0.61-3.2h15.79c0.34,0,0.61,1.43,0.61,3.2c0,1.77-0.27,3.2-0.61,3.2H15.85L15.85,67.09z M40.98,67.09 c-0.34,0-0.61-1.43-0.61-3.2c0-1.77,0.27-3.2,0.61-3.2h15.79c0.34,0,0.61,1.43,0.61,3.2c0,1.77-0.27,3.2-0.61,3.2H40.98 L40.98,67.09z M66.11,67.09c-0.34,0-0.61-1.43-0.61-3.2c0-1.77,0.27-3.2,0.61-3.2H81.9c0.34,0,0.61,1.43,0.61,3.2 c0,1.77-0.27,3.2-0.61,3.2H66.11L66.11,67.09z M91.25,67.09c-0.34,0-0.61-1.43-0.61-3.2c0-1.77,0.27-3.2,0.61-3.2h15.79 c0.34,0,0.61,1.43,0.61,3.2c0,1.77-0.27,3.2-0.61,3.2H91.25L91.25,67.09z M15.85,85.45c-0.34,0-0.61-1.43-0.61-3.2 c0-1.77,0.27-3.2,0.61-3.2h15.79c0.34,0,0.61,1.43,0.61,3.2c0,1.77-0.27,3.2-0.61,3.2H15.85L15.85,85.45z M40.98,85.45 c-0.34,0-0.61-1.43-0.61-3.2c0-1.77,0.27-3.2,0.61-3.2h15.79c0.34,0,0.61,1.43,0.61,3.2c0,1.77-0.27,3.2-0.61,3.2H40.98 L40.98,85.45z M66.11,85.45c-0.34,0-0.61-1.43-0.61-3.2c0-1.77,0.27-3.2,0.61-3.2H81.9c0.34,0,0.61,1.43,0.61,3.2 c0,1.77-0.27,3.2-0.61,3.2H66.11L66.11,85.45z M91.25,85.45c-0.34,0-0.61-1.43-0.61-3.2c0-1.77,0.27-3.2,0.61-3.2h15.79 c0.34,0,0.61,1.43,0.61,3.2c0,1.77-0.27,3.2-0.61,3.2H91.25L91.25,85.45z M15.85,103.81c-0.34,0-0.61-1.43-0.61-3.2 c0-1.77,0.27-3.2,0.61-3.2h15.79c0.34,0,0.61,1.43,0.61,3.2c0,1.77-0.27,3.2-0.61,3.2H15.85L15.85,103.81z M40.98,103.81 c-0.34,0-0.61-1.43-0.61-3.2c0-1.77,0.27-3.2,0.61-3.2h15.79c0.34,0,0.61,1.43,0.61,3.2c0,1.77-0.27,3.2-0.61,3.2H40.98 L40.98,103.81z M29.61,4.73c0-2.61,2.58-4.73,5.77-4.73s5.77,2.12,5.77,4.73v20.72c0,2.61-2.58,4.73-5.77,4.73 s-5.77-2.12-5.77-4.73V4.73L29.61,4.73z M6.4,45.32h110.07V21.47c0-0.8-0.33-1.53-0.86-2.07c-0.53-0.53-1.26-0.86-2.07-0.86H103 c-1.77,0-3.2-1.43-3.2-3.2c0-1.77,1.43-3.2,3.2-3.2h10.55c2.57,0,4.9,1.05,6.59,2.74c1.69,1.69,2.74,4.02,2.74,6.59v27.06v65.03 c0,2.57-1.05,4.9-2.74,6.59c-1.69,1.69-4.02,2.74-6.59,2.74H9.33c-2.57,0-4.9-1.05-6.59-2.74C1.05,118.45,0,116.12,0,113.55V48.52 V21.47c0-2.57,1.05-4.9,2.74-6.59c1.69-1.69,4.02-2.74,6.59-2.74H20.6c1.77,0,3.2,1.43,3.2,3.2c0,1.77-1.43,3.2-3.2,3.2H9.33 c-0.8,0-1.53,0.33-2.07,0.86c-0.53,0.53-0.86,1.26-0.86,2.07V45.32L6.4,45.32z M116.48,51.73H6.4v61.82c0,0.8,0.33,1.53,0.86,2.07 c0.53,0.53,1.26,0.86,2.07,0.86h104.22c0.8,0,1.53-0.33,2.07-0.86c0.53-0.53,0.86-1.26,0.86-2.07V51.73L116.48,51.73z M50.43,18.54 c-1.77,0-3.2-1.43-3.2-3.2c0-1.77,1.43-3.2,3.2-3.2h21.49c1.77,0,3.2,1.43,3.2,3.2c0,1.77-1.43,3.2-3.2,3.2H50.43L50.43,18.54z"}})])])])},B=[],q={name:"SvgCalandar"},F=q,J=Object(S["a"])(F,E,B,!1,null,null,null),Q=J.exports,G=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-date flat cercle"},[a("div",{staticClass:"single-date-picker__calendar-month-header"},[a("div",{staticClass:"single-date-picker__arrow left",on:{click:function(t){return e.toggleMonth(-1)}}}),""!=e.calandar_title?a("div",{staticClass:"single-date-picker__year",domProps:{innerHTML:e._s(e.calandar_title)}}):e._e(),a("div",{staticClass:"single-date-picker__arrow right",on:{click:function(t){return e.toggleMonth(1)}}})]),a("ul",{staticClass:"d-flex flex-wrap justify-content-center"},[e.show_day_label?a("div",{staticClass:"d-flex flex-wrap justify-content-center w-100"},[a("li",{staticClass:"date day"},[e._v(" Lun ")]),a("li",{staticClass:"date day"},[e._v(" Mar ")]),a("li",{staticClass:"date day"},[e._v(" Mer ")]),a("li",{staticClass:"date day"},[e._v(" Jeu ")]),a("li",{staticClass:"date day"},[e._v(" Ven ")]),a("li",{staticClass:"date day"},[e._v(" Sam ")]),a("li",{staticClass:"date day"},[e._v(" Dim ")])]):e._e(),e._l(e.list_calander_days,(function(t,r){return a("li",{key:r,class:["date",t.status?"disable":"actif",t.custom_class,t.select?"selected":""],on:{click:function(a){return e.select_date(t)}}},[e.show_month_in_date?a("span",{domProps:{innerHTML:e._s(t.day_french)}}):e._e(),e.show_month_in_date?e._e():a("span",{domProps:{innerHTML:e._s(t.date_month)}})])}))],2)])},K=[],W=a("d4ec"),X=a("bee2");if(window.moment)var Z=window.moment;var ee={apply__app_delai_jour:!0,filter_date_desactivee:{},filter_periode_desactivee:{},attri_filters:["jours_select","date_desactivee","periode_desactivee"],HourIntervalContain:function(e,t,a,r,i){var n=e.split(":"),s=Z(i,"DD-MM-YYYY HH:mm:ss");s.hours(n[0]),s.minutes(n[1]);var c=t.split(":"),o=Z(i,"DD-MM-YYYY HH:mm:ss");o.hours(c[0]),o.minutes(c[1]);var l=a.diff(s,"minutes"),u=a.diff(o,"minutes"),_=r.diff(s,"minutes"),d=r.diff(o,"minutes");return l>=0&&u<0||_>0&&d<=0||l<0&&d>=0},JourSelect:function(e,t){return new Promise((function(a){for(var r in e){if(e[r]===t)return void a(!0);var i=parseInt(r)+1;if(e.length===i)return void a(!1)}}))},DateDesactivee:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"date",i=this;return new Promise((function(n){var s=function(){return new Promise((function(e){for(var r in t){if(t[r].date===a)return void e(!0);var i=parseInt(r)+1;if(t.length===i)return void e(!1)}}))};if("date"===r)s().then((function(e){n(e)}));else{if(i.filter_date_desactivee[e]&&i.filter_date_desactivee[e][a])return void n(i.filter_date_desactivee[e][a].status);s().then((function(t){i.filter_date_desactivee[e]||(i.filter_date_desactivee[e]={}),i.filter_date_desactivee[e][a]={status:t},console.log("DateDesactivee +++"),n(t)}))}}))},PeriodeDesactivee:function(e,t,a,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"date",n=this;return new Promise((function(s){var c=function(){return new Promise((function(e){for(var r in t){var i=t[r],n=Z(i.debut,"YYYY-MM-DD"),s=Z(i.fin,"YYYY-MM-DD");if(a.diff(n,"days")>=0&&a.diff(s,"days")<=0)return void e(!0);var c=parseInt(r)+1;if(t.length===c)return void e(!1)}}))};if("date"===i)c().then((function(e){s(e)}));else{if(n.filter_periode_desactivee[e]&&n.filter_periode_desactivee[e][r])return void s(n.filter_periode_desactivee[e][r].status);c().then((function(t){n.filter_periode_desactivee[e]||(n.filter_periode_desactivee[e]={}),n.filter_periode_desactivee[e][r]={status:t},s(t)}))}}))},saveData:function(e,t,a){var r=this;"date_desactivee"===e.verificateur?(r.filter_date_desactivee[t]||(r.filter_date_desactivee[t]={}),r.filter_date_desactivee[t][a]={status:e.status}):"periode_desactivee"===e.verificateur&&(r.filter_periode_desactivee[t]&&(r.filter_periode_desactivee[t]={}),r.filter_periode_desactivee[t][a]={status:e.status})},loopAttribFilter:function(e,t,a,r,i,n){var s=this,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return new Promise((function(l){if(t[s.attri_filters[c]].length)switch(s.attri_filters[c]){case"jours_select":s.JourSelect(t.jours_select,i).then((function(o){if(o){var u=c+1;u<s.attri_filters.length?l(s.loopAttribFilter(e,t,a,r,i,n,u,o)):l({status:o,i:e,verificateur:s.attri_filters[c]})}else l({status:o,i:e,verificateur:"jours_select"})}));break;case"date_desactivee":s.DateDesactivee(e,t.date_desactivee,r,n).then((function(o){if(o)l({status:o,i:e,verificateur:"date_desactivee"});else{var u=c+1;u<s.attri_filters.length?l(s.loopAttribFilter(e,t,a,r,i,n,u,o)):l({status:o,i:e,verificateur:s.attri_filters[c]})}}));break;case"periode_desactivee":s.PeriodeDesactivee(e,t.periode_desactivee,a,r,n).then((function(o){if(o)l({status:o,i:e,verificateur:"periode_desactivee"});else{var u=c+1;u<s.attri_filters.length?l(s.loopAttribFilter(e,t,a,r,i,n,u,o)):l({status:o,i:e,verificateur:s.attri_filters[c]})}}));break;default:l({status:o,i:e,verificateur:"non definit"})}else{var u=c+1;u<s.attri_filters.length?l(s.loopAttribFilter(e,t,a,r,i,n,u,o)):l({status:o,i:e,verificateur:"non definit END"})}}))}},te=ee;if(window.moment)var ae=window.moment;var re=function(){function e(t,a,r,i,n,s,c,o,l,u,_){Object(W["a"])(this,e),this.app_date_utilisable_string=t,this.app_date_utilisable_string_hour=a,this.h_debut=r,this.m_debut=i,this.h_fin=n,this.m_fin=s,this.plage_heures_valide=c,this.app_interval=o,this.app_delai_next_creneau=l,this.filters=u,this.deccalage_creneau_depart=_,this.date_max=null,this.data_min=null,this.list_creneaux=[],this.test_creneau=0,this.current_creneau=null,this.test_auto_select_next_day=99,this.app_date_utilisable=ae(t,"DD-MM-YYYY"),this.app_date_utilisable_hour=ae(a,"DD-MM-YYYY HH:mm:ss"),this.checkIsApplay=!1}return Object(X["a"])(e,[{key:"dateBorne",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t,a,r,i,n,s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.data_min=ae(this.app_date_utilisable_string,"DD-MM-YYYY"),this.date_max=ae(this.app_date_utilisable_string,"DD-MM-YYYY"),this.date_max.isValid()&&(t=this.h_debut,a=this.m_debut,r=this.h_fin,i=this.m_fin,n=this.date_max.day(),this.plage_heures_valide.length>0&&this.plage_heures_valide[n]&&(s=this.plage_heures_valide[n].debut.split(":"),t=parseInt(s[0]),a=parseInt(s[1]),c=this.plage_heures_valide[n].fin.split(":"),r=parseInt(c[0]),i=parseInt(c[1])),this.data_min.hours(t),this.data_min.minutes(a),this.data_min.seconds(0),this.date_max.hours(r),this.date_max.minutes(i),this.date_max.seconds(0));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"buildHour",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.data_min){e.next=3;break}return e.next=3,this.getIntervalUtilisable(this.data_min);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getIntervalUtilisable",value:function(e){var t=this;return new Promise((function(a,r){if(t.test_creneau++,t.test_creneau>99)return alert("Probleme de configuration : Creneau"),r(!1),!1;var i={},n=ae(e,"DD-MM-YYYY HH:mm:ss"),s=ae(e,"DD-MM-YYYY HH:mm:ss").add(t.app_interval,"minutes"),c=ae(e,"DD-MM-YYYY HH:mm:ss").add(t.app_delai_next_creneau,"minutes");i.begin=n.format("HH:mm"),t.checkIsCreneauValide(n,s,e).then(function(){var r=Object(j["a"])(regeneratorRuntime.mark((function r(o){var l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(i.$isDisabled=!1,i.checkstatus="none",!o.status){r.next=7;break}i.$isDisabled=!0,i.checkstatus=o.verificateur,r.next=11;break;case 7:return r.next=9,t.ApplyFilters(n,s,e);case 9:l=r.sent,l.status&&(i.$isDisabled=l.status,i.checkstatus=l.verificateur);case 11:t.date_max.diff(s,"minutes")>=0?(i.end=s.format("HH:mm"),i.$isDisabled||t.list_creneaux.push(i),a(t.getIntervalUtilisable(c.format("DD-MM-YYYY HH:mm:ss")))):a(!0);case 12:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())}))}},{key:"checkIsCreneauValide",value:function(e,t,a){var r=this,i=this;return new Promise((function(n){var s=e.diff(r.app_date_utilisable_hour,"minutes");if(s<0)n({status:!0,verificateur:"heure depassé"});else{var c=function(){return new Promise((function(t){if(i.deccalage_creneau_depart>0){var a=ae(i.app_date_utilisable_string_hour,"DD-MM-YYYY HH:mm:ss");a.add(i.deccalage_creneau_depart,"minutes");var r=e.diff(a,"minutes");t(r<0)}else t(!1)}))};c().then((function(e){return e?(n({status:!0,verificateur:"disable_for_deccalage"}),!0):(n({status:!1,verificateur:"none",creneaux_heure_end:t,date_min_string:a}),!1)}))}}))}},{key:"ApplyFilters",value:function(e,t,a){var r=this;return new Promise((function(i){if(0!==r.filters.length){var n=function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(n){var s=r.filters[i];""!==s.h_debut&&""!==s.h_fin?te.HourIntervalContain(s.h_debut,s.h_fin,e,t,a)?te.loopAttribFilter(i,s,r.app_date_utilisable,r.app_date_utilisable.format("YYYY-MM-DD"),r.app_date_utilisable.day(),"creneau").then((function(e){n(e)})):n({status:!1,i:i,verificateur:"plage_heure"}):n({status:!1,i:i,verificateur:"nothing"})}))},s=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;n(t).then((function(t){var a=t.i+1;t.status?i(t):r.filters[a]?e(a):i(t)}))};s()}else i({status:!1,verificateur:"filter empty"})}))}}]),e}();if(window.moment)var ie=window.moment;var ne={jour_desactivee:[],type_creneau:"",app_date:{},datetime_min:{},filters:[],ValidationDay:function(e){var t=this;if(!t.app_date||!t.app_date.isValid()||!t.datetime_min||!t.datetime_min.isValid())throw"La variable self.app_date|self.datetime_min est requise";return new Promise((function(a){var r=e.day();if(e.diff(t.app_date,"minutes")<0)a({status:!0,custom_class:"default-disable-app-date"});else if(e.diff(t.datetime_min,"days")<0&&"livraison"===t.type_creneau)a({status:!0,custom_class:"default-disable-livraison"});else{if(t.jour_desactivee.length&&t.jour_desactivee.includes(r))return void a({status:!0,custom_class:"jour_desactivee"});if(0===t.filters.length)return void a({status:!1,custom_class:"filter empty"});a(t.DisableDateByfilter(e))}}))},DisableDateByfilter:function(e){var t=this;return new Promise((function(a){var r=e.day(),i=e.format("YYYY-MM-DD"),n=ie(i,"YYYY-MM-DD"),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(a){var s=t.filters[e];0===s.h_debut.length&&0===s.h_fin.length?te.loopAttribFilter(e,s,n,i,r,"date").then((function(t){t.custom_class="filtre-"+e+" "+t.verificateur,a(t)})):a({status:!1,i:e,custom_class:"nothing"})}))},c=function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;s(r).then((function(r){var i=r.i+1;r.status?a(r):t.filters[i]?e(i):a(r)}))};c()}))}},se=ne;if(window.moment)var ce=window.moment;var oe=function(){function e(t,a,r,i,n,s,c){Object(W["a"])(this,e),this.app_date_utilisable_string=t,this.calendar_nav=a,this.nombre_semaine=r,this.jour_desactivee=i,this.type_creneau=n,this.filters=s,this.date_select=c,this.list_calander_days=[],this.test_calandar_day=0,this.app_date_utilisable=ce(t,"DD-MM-YYYY"),this.datetime_min=ce(t,"DD-MM-YYYY"),this.selectedDate=!1}return Object(X["a"])(e,[{key:"builderCalandar",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t,a,r,i,n,s,c,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(t=ce(this.app_date_utilisable_string,"DD-MM-YYYY").add(this.calendar_nav,"month"),a=ce(this.app_date_utilisable_string,"DD-MM-YYYY").add(this.calendar_nav,"month"),r=7*this.nombre_semaine,i=t.day(),i||(i=7),n=this.weekOfMonth(ce(this.app_date_utilisable_string,"DD-MM-YYYY")),s=0,c=1;c<n;c++)s+=7;return o=6+i-7+s,o>0&&(r-=o,t.add(-o,"days")),a.add(r,"days"),e.next=13,this.getPlageDate(t,a);case 13:self.selectedDate;case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setDate",value:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return{date_string:e,day_french:t.locale("fr").format("Do <br /> MMM"),date_month:t.locale("fr").format("DD"),custom_class:a.custom_class,select:r,status:a}}},{key:"weekOfMonth",value:function(e){var t=e.clone().startOf("month"),a=t.clone().startOf("week"),r=t.diff(a,"days");return Math.ceil((e.date()+r)/7)}},{key:"getPlageDate",value:function(e,t){se.app_date=this.app_date_utilisable,se.jour_desactivee=this.jour_desactivee,se.type_creneau=this.type_creneau,se.datetime_min=this.datetime_min,se.filters=this.filters;var a=this;return new Promise((function(r,i){if(a.test_calandar_day++,a.test_calandar_day>99)return i(!1),!1;e.diff(t,"days")?se.ValidationDay(e).then((function(i){var n=e.format("DD-MM-YYYY"),s=!1;a.date_select||n!=a.app_date_utilisable_string?(a.date_select&&!i.status&&n==a.date_select.date_string||n==a.app_date_utilisable_string)&&(s=!0):s=!0;var c={date_string:n,day_french:e.locale("fr").format("Do <br /> MMM"),date_month:e.locale("fr").format("DD"),custom_class:i.custom_class,select:s,status:i.status};s&&(a.selectedDate=!0,a.date_select=c),a.list_calander_days.push(c),e.add(1,"days"),r(a.getPlageDate(e,t))})):r(!0)}))}}]),e}();if(window.moment)var le=window.moment;var ue=function(){function e(t,a,r){Object(W["a"])(this,e),this.jour_desactivee=t,this.app_delai_jour=a,this.filters=r,this.test_delai_jour=0,this.test_jour_semaine=0,this.test_date_desactivee=0}return Object(X["a"])(e,[{key:"date_utilisable",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t){var a,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=!(r.length>1&&void 0!==r[1])||r[1],e.next=3,this.getDayUtilisable(t,null,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getDayUtilisable",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this;return new Promise((function(i,n){if(r.test_jour_semaine>6)return alert("Boucle infinie detecter ..."+t),n(!1),!1;if(r.test_date_desactivee>99)return alert("Boucle infinie detecter ..."),n(!1),!1;var s=e.day();r.jour_desactivee.length&&r.jour_desactivee.includes(s)?(r.test_jour_semaine++,e.add(1,"days"),i(r.getDayUtilisable(e,"jour desactivée",a))):r.DisableDateByfilter(e).then((function(t){t.status?(r.test_date_desactivee++,e.add(1,"days"),i(r.getDayUtilisable(e,"date desactivée",a))):a&&r.app_delai_jour&&r.app_delai_jour>r.test_delai_jour?(r.test_delai_jour++,e.add(1,"days"),i(r.getDayUtilisable(e,"delai jour",a))):i(e)}))}))}},{key:"DisableDateByfilter",value:function(e){var t=this;return new Promise((function(a){var r=e.day(),i=e.format("YYYY-MM-DD"),n=le(i,"YYYY-MM-DD"),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(a){var s=t.filters[e];0===s.h_debut.length&&0===s.h_fin.length?te.loopAttribFilter(e,s,n,i,r,"date").then((function(e){a(e)})):a({status:!1,i:e,custom_class:"nothing"})}))},c=function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;s(r).then((function(r){var i=r.i+1;r.status?a(r):t.filters[i]?e(i):a(r)}))};c()}))}}]),e}();if(window.moment)var _e=window.moment;var de={name:"calendar",props:{type_creneau:{type:String,default:""},app_date_utilisable_string_hour:{type:String,required:!0},filters:{type:Array,required:!0},nombre_semaine:{type:Number,default:4},jour_desactivee:{type:Array,default:function(){return[0,6]}},rebuild_creneau:{type:[Object,String]}},data:function(){return{list_calander_days:[],calendar_nav:0,show_month_in_date:!1,show_day_label:!0,date_select:null}},watch:{app_date_utilisable_string_hour:function(){this.calendar_nav=0,this.init()},date_select:{deep:!0,handler:function(e){this.$emit("select_date",e)}}},computed:{calandar_title:{get:function(){return""!=this.app_date_utilisable_string_hour?_e(this.app_date_utilisable_string_hour,"DD-MM-YYYY").add(this.calendar_nav,"month").locale("fr").format("MMMM  YYYY"):""}}},methods:{init:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=_e(e.app_date_utilisable_string_hour,"DD-MM-YYYY HH:mm:ss"),r=new oe(a.format("DD-MM-YYYY"),e.calendar_nav,e.nombre_semaine,e.jour_desactivee,e.type_creneau,e.filters,e.date_select),t.next=4,r.builderCalandar();case 4:e.list_calander_days=r.list_calander_days,e.date_select=r.date_select;case 6:case"end":return t.stop()}}),t)})))()},select_date:function(e){if(console.log("select_date : ",e),!e.status){for(var t in this.list_calander_days){var a=this.list_calander_days[t];a.select&&(a.select=!1);var r=parseInt(t)+1;r===this.list_calander_days.length&&(e.select=!0)}this.date_select=e,this.$emit("close_calendar",!0)}},toggleMonth:function(e){e>0?this.calendar_nav++:this.calendar_nav--,this.init()}}},pe=de,ve=(a("5174"),Object(S["a"])(pe,G,K,!1,null,null,null)),fe=ve.exports,he=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%"}},[a("advanced-select",{attrs:{disabled:e.disabled_creneau,options:e.list_creneaux,"show-labels":!1,searchable:!1,placeholder:"00:00 - 00:00","track-by":"begin","open-direction":"bottom"},scopedSlots:e._u([{key:"singleLabel",fn:function(t){var a=t.option;return[e._v(" "+e._s(a.begin)+" - "+e._s(a.end)+" ")]}},{key:"option",fn:function(t){return[a("span",{attrs:{checkstatus:t.option.checkstatus}},[e._v(" "+e._s(t.option.begin)+" - "+e._s(t.option.end)+" ")])]}}]),model:{value:e.current_creneau,callback:function(t){e.current_creneau=t},expression:"current_creneau"}},[a("template",{slot:"noOptions"},[a("span",[e._v("Aucun créneau disponible à cette date")])])],2)],1)},me=[],ge=a("8e5f"),be=a.n(ge);if(window.moment)var ye=window.moment;var we={name:"Hours",props:{app_date_utilisable_string_hour:{type:String,required:!0},h_debut:{type:Number,required:!0},m_debut:{type:Number,required:!0},h_fin:{type:Number,required:!0},m_fin:{type:Number,required:!0},plage_heures_valide:{type:Array,required:!0},filters:{type:Array,required:!0},configs:{type:Object,required:!0},deccalage_creneau_depart:{type:Number}},components:{AdvancedSelect:be.a},data:function(){return{current_creneau:"",disabled_creneau:!1,list_creneaux:[],heure_creneau_debut:null,heure_creneau_fin:null}},mounted:function(){},watch:{app_date_utilisable_string_hour:function(){this.init()},current_creneau:function(e){e?this.$emit("select_creneau",e):this.$emit("select_next_day",e)}},computed:{},methods:{init:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=ye(e.app_date_utilisable_string_hour,"DD-MM-YYYY HH:mm:ss"),r=new re(a.format("DD-MM-YYYY"),e.app_date_utilisable_string_hour,e.h_debut,e.m_debut,e.h_fin,e.m_fin,e.plage_heures_valide,e.configs.creneau,e.configs.delai_next_creneau,e.filters,e.deccalage_creneau_depart),t.next=4,r.dateBorne();case 4:return t.next=6,r.buildHour();case 6:e.list_creneaux=r.list_creneaux,e.current_creneau=e.list_creneaux[0];case 8:case"end":return t.stop()}}),t)})))()}}},Ye=we,xe=Object(S["a"])(Ye,he,me,!1,null,"f7545272",null),ke=xe.exports;if(window.moment)var je=window.moment;var Me={name:"SelectionHoraire",props:{title:{type:String},classes:{type:String,default:"rond-left ml-md-1"},interval:{type:Number,default:120},h_debut:{type:Number,default:8},m_debut:{type:Number,default:0},h_fin:{type:Number,default:21},m_fin:{type:Number,default:0},date_desactivee:{type:Array,default:function(){return["24-09-2020"]}},plage_heures_valide:{type:Array,default:function(){return[]}},type_creneau:{type:String,default:""},delai_jour:{type:Number,default:0},jour_desactivee:{type:Array,default:function(){return[0,6]}},current_date:{type:Object},nombre_semaine:{type:Number,default:6},nombre_res_creneau:{type:Number,default:3},rebuild_creneau:{type:[String,Object]},configs:{type:Object,default:function(){return{interval:120,delai_jour:0}}},deccalage_creneau_depart:{type:Number,default:0},filters:{type:Array,required:!0}},data:function(){return{app_date_utilisable:je(),show_calandar:!1,date_string_generate_by_calendar:""}},components:{"svg-calandear":Q,calendar:fe,Hours:ke},watch:{configs:{handler:function(){this.init_creneau(this.current_date)},deep:!0},current_date:{handler:function(e){this.init_creneau(e)},deep:!0}},computed:{app_date_display:{get:function(){return""!=this.date_string_generate_by_calendar?je(this.date_string_generate_by_calendar,"DD-MM-YYYY").locale("fr").format("dddd Do MMMM"):""}},app_date_utilisable_string:function(){return this.app_date_utilisable.format("DD-MM-YYYY")},app_date_utilisable_string_hour:function(){return this.app_date_utilisable.format("DD-MM-YYYY HH:mm:ss")}},methods:{init_creneau:function(e){var t=arguments,a=this;return Object(j["a"])(regeneratorRuntime.mark((function r(){var i,n,s,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(i=!(t.length>1&&void 0!==t[1])||t[1],n=je(e),n.isValid()){r.next=5;break}return console.log("format de date non valide : ",e),r.abrupt("return",!1);case 5:return s=n.day(),"collecte"===a.type_creneau&&a.jour_desactivee.length&&a.jour_desactivee.includes(s)&&n.set({hour:0,minute:0,second:0}),c=new ue(a.jour_desactivee,a.configs.delai,a.filters),r.next=10,c.date_utilisable(n,i);case 10:a.app_date_utilisable=r.sent;case 11:case"end":return r.stop()}}),r)})))()},display_hide_calandar:function(){this.show_calandar?this.show_calandar=!1:this.show_calandar=!0},select_date_calendar:function(e){e.date_string==this.app_date_utilisable_string?this.date_string_generate_by_calendar=this.app_date_utilisable_string_hour:this.date_string_generate_by_calendar=e.date_string},select_creneau:function(e){var t=je(this.date_string_generate_by_calendar,"DD-MM-YYYY"),a=e.begin.split(":");t.set({hour:a[0],minute:parseInt(a[1])+parseInt(this.configs.delai_next_creneau)});var r={creneau:e,date_string:t.format("DD-MM-YYYY"),date:t};this.$emit("ev_select_current_creneau",r)},select_next_day:function(){var e=je(this.date_string_generate_by_calendar,"DD-MM-YYYY");e.add(1,"days"),this.init_creneau(e,!1)}}},De=Me,Ce=Object(S["a"])(De,z,U,!1,null,null,null),He=Ce.exports;if(window.moment)var Le=window.moment;var Ae,Se={name:"SelectionHoraire",props:{nombre_semaine:{type:Number},nombre_res_creneau:{type:Number},disable_heureday:{type:Array},disable_heuredate:{type:Array},plage_heures_valide:{type:Array},url_get_creneau:{type:String},collecte_title:{type:String,default:"Collecte"},collecte_livraison:{type:String,default:"rectangle rond-left mx-2 mx-md-0 mb-3 mb-md-0 mx-3 pt-4 pl-sm-3 col-md-6"},collecte_delai_jour:{type:Number},collecte_jour_desactivee:{type:Array},collecte_date_desactivee:{type:Array},collecte_interval:{type:Number},collecte_configs:{type:Object},collecte_current_date:{type:Object},collecte_deccalage_creneau_depart:{type:Number},title_livraison:{type:String,default:"Livraison"},classes_livraison:{type:String,default:" rectangle rond-right mx-2 mx-md-0 mb-3 mb-md-0 mx-3 pt-4 pl-sm-3 col-md-6"},livraison_delai_jour:{type:Number},livraison_jour_desactivee:{type:Array},livraison_date_desactivee:{type:Array},livraison_interval:{type:Number},livraison_configs:{type:Object},filters:{type:Array}},components:{creneau:He},data:function(){return{livraison_current_date:null}},mounted:function(){},methods:{ev_select_current_creneau_collecte:function(e){this.$emit("ev_creneau_collecte",e),this.livraison_current_date=e.date,console.log("ev_select_current_creneau_collecte")},ev_select_current_creneau_livraison:function(e){this.$emit("ev_creneau_livraison",e)},getValidData:function(e){var t=JSON.parse(e),a=Le(t.date_string_not_change,"DD-MM-YYYY HH:mm:ss");return t.date=a,t.date_string=a.format("DD-MM-YYYY HH:mm:ss"),t}}},Te=Se,Pe=Object(S["a"])(Te,I,$,!1,null,null,null),Oe=Pe.exports,Ve=a("d523"),Re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.show_alert?a("div",{class:e.class_alert,attrs:{attribut:e.alert_attribut_class,role:"alert",id:e.alert_id_html}},[a("div",{domProps:{innerHTML:e._s(e.alert_message)}}),a(e.alert_template,{tag:"component",attrs:{sub_datas:e.datas},on:{ev_alert_action:e.alert_action}}),e._t("default"),a("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"},on:{click:e.closeByParent}},[e._v("×")])])],2):e._e()},Ne=[],Ie={name:"Alert",props:{alert_message:{type:String,default:"alert primary"},alert_id_html:{type:String,default:"id-alert"},show_alert:{type:Boolean,default:!0},alert_attribut_class:{type:String,default:"alert-primary"},alert_template:{type:String,default:""},datas:{type:[Object,Array,String,Number],default:"datas_vide"}},data:function(){return{}},computed:{class_alert:{get:function(){var e="alert alert-dismissible fade show";return e+=" "+this.alert_attribut_class,e}}},methods:{closeByParent:function(){this.$emit("ev_alert_close")},alert_action:function(e){this.$emit("ev_alert_action",e)}}},$e=Ie,ze=Object(S["a"])($e,Re,Ne,!1,null,null,null),Ue=ze.exports;window.jQuery?Ae=window.jQuery:window.$&&(Ae=window.$);var Ee=function(e,t){var a="",r=/\{\{\s*(\w+)\s*\}\}/,i=t||this.money_format;function n(e,t){return"undefined"==typeof e?t:e}function s(e,t,a,r){if(t=n(t,2),a=n(a,","),r=n(r,"."),isNaN(e)||null==e)return 0;e=(e/100).toFixed(t);var i=e.split("."),s=i[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+a),c=i[1]?r+i[1]:"";return s+c}switch("string"==typeof e&&(e=e.replace(".","")),i.match(r)[1]){case"amount":a=s(e,2);break;case"amount_no_decimals":a=s(e,0);break;case"amount_with_comma_separator":a=s(e,2,".",",");break;case"amount_no_decimals_with_comma_separator":a=s(e,0,".",",");break}return i.replace(r,a)},Be={name:"CrenneauV2",props:{blocks_type_livraisons:{type:Array},titre_module:{type:String,default:"Finaliser la commande"},nombre_semaine:{type:Number},nombre_res_creneau:{type:Number},plage_heures_valide:{type:Array},disable_heureday:{type:Array},disable_heuredate:{type:Array},collecte_delai_jour:{type:Number},collecte_jour_desactivee:{type:Array},collecte_date_desactivee:{type:Array},collecte_interval:{type:Number},collecte_current_date:{type:Object},collecte_deccalage_creneau_depart:{type:Number},livraison_delai_jour:{type:Number},livraison_jour_desactivee:{type:Array},livraison_date_desactivee:{type:Array},livraison_interval:{type:Number},livraison_current_date:{type:Object},url_save_creneau:{type:String,default:"http://habeuk.kksa/api/shopify/creneaux/add"},url_get_creneau:{type:String},app_env_prod:{type:Boolean,default:!0},filters:{type:Array}},components:{"type-livraison":N,selectionhoraire:Oe,alert:Ue,VueLoading:Ve["VueLoading"]},data:function(){return{collecte_configs:{},VueCollecte:{},VueLivraison:{},show:!1,show_cover:!1,show_alert:!1,alert_message:"",alert_attribut_class:"alert-primary",creneau_livraison:"",creneau_collecte:"",TypeLivraison:{},CartTypeLivraison:"",cart:"",VueTypelivraison:"",livraison_app_date_current_string:"",collecte_app_date_current_string:""}},mounted:function(){this.VueCollecte=this.$refs.selectionhoraire.$refs.collecte,this.VueLivraison=this.$refs.selectionhoraire.$refs.livraison,this.show=!0,this.VueTypelivraison=this.$refs.typelivraison,this.initcreneau()},methods:{ev_toggle_month_collecte:function(e){return console.log("direction_collecte",e),this.collecte_current_date.add(e,"month")},ev_toggle_month_livraison:function(e){console.log("direction_livraison",e)},loadcart:function(){var e=this;return new Promise((function(t,a){e.show_cover=!0,Ae.getJSON("/cart.js",(function(r,i){console.log("Panier textStatus : ",r),e.show_cover=!1,i?(e.cart=r,t(!0)):a(!1)})).fail((function(){console.log("Impossible de recuperer le panier"),e.show_cover=!1,e.app_env_prod?a(!1):t(!1)}))}))},initcreneau:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.app_env_prod||e.setEvant(),e.HideStaticLoading(),t.next=4,e.loadcart();case 4:if(a=t.sent,!a){t.next=10;break}return t.next=8,e.getProductType();case 8:e.TypeLivraison&&e.CartTypeLivraison&&e.CartTypeLivraison.id&&e.CartTypeLivraison.id!==e.TypeLivraison.id?e.apply_type_livraison_by_id(e.CartTypeLivraison.id):e.TypeLivraison&&!e.CartTypeLivraison.id&&e.addProductTypeLivraison(),e.setEvant();case 10:case"end":return t.stop()}}),t)})))()},getProductType:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.cart&&e.cart.item_count>0)){t.next=13;break}console.log("getProductType()",e.typeLivraisonIds),t.t0=regeneratorRuntime.keys(e.cart.items);case 3:if((t.t1=t.t0()).done){t.next=11;break}if(a=t.t1.value,r=e.cart.items[a],!e.typeLivraisonIds.includes(r.id)){t.next=9;break}return e.CartTypeLivraison=r,t.abrupt("return",r);case 9:t.next=3;break;case 11:t.next=14;break;case 13:return t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t)})))()},setEvant:function(){var e=this;Ae(document).on("SaveCreneauxChechout",(function(t){e.SaveCreneau(t)}))},SaveCreneau:function(){var e=arguments,t=this;return Object(j["a"])(regeneratorRuntime.mark((function a(){var r,i,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:null,a.next=3,t.verification();case 3:if(i=a.sent,!i){a.next=26;break}return a.next=7,t.buildAttribut();case 7:return n=a.sent,a.next=10,t.SaveAttributeCart(n);case 10:return console.log("Attribut : ",n),a.next=13,t.loadcart();case 13:if(!(t.cart&&t.cart.attributes&&t.cart.attributes.livraison)&&t.app_env_prod){a.next=20;break}return a.next=16,t.SaveCreneauOnApi();case 16:Ae(".cart-checkout .loadding",r.target).removeClass("fa-spin"),t.triggerCheckout(),a.next=24;break;case 20:return t.show_alert=!0,t.alert_attribut_class="alert-danger ml-md-4",t.alert_message+='- Une erreur s"est produite lors de la sauvegarde de vos informations. <br /> Verifier votre connexion et actualiser la page <br />',a.abrupt("return",!1);case 24:a.next=27;break;case 26:r&&r.target&&(Ae(".cart-checkout .submit-cart-test",r.target).addClass("bg-danger"),Ae(".cart-checkout .loadding",r.target).removeClass("fa-spin"));case 27:case"end":return a.stop()}}),a)})))()},SaveCreneauOnApi:function(){var e=this;return new Promise((function(t){var a="date_collecte=";a+=encodeURIComponent(e.creneau_collecte.date.format("DD-MM-YYYY HH:mm:ss")),a+="&date_livraison="+encodeURIComponent(e.creneau_livraison.date.format("DD-MM-YYYY HH:mm:ss")),a+="&creneau_livraison="+encodeURIComponent(e.creneau_livraison.creneau.begin)+"-",a+=encodeURIComponent(e.creneau_livraison.creneau.end),a+="&creneau_collecte="+encodeURIComponent(e.creneau_collecte.creneau.begin)+"-",a+=encodeURIComponent(e.creneau_collecte.creneau.end),a+="&creneau_type="+encodeURIComponent(e.TypeLivraison.type);var r=document.createElement("iframe");r.setAttribute("src",e.url_save_creneau+"?"+a),r.setAttribute("style","display:none !important"),r.style.width="640px",r.style.height="480px",document.body.appendChild(r),t(!0)}))},triggerCheckout:function(){Ae(".creneaux-mbt .cart-checkout .submit-cart").trigger("click"),console.log("verfication de la presence du bouton formulaire ",Ae(".creneaux-mbt .cart-checkout .submit-cart"))},buildAttribut:function(){var e="Livraison";e+="\r\n",e+="Date :"+this.creneau_livraison.date.format("DD-MM-YYYY HH:mm:ss"),e+="\r\n",e+="Creneau :"+this.creneau_livraison.creneau.begin+" - "+this.creneau_livraison.creneau.end;var t="Collecte";t+="\r\n",t+="Date :"+this.creneau_collecte.date.format("DD-MM-YYYY HH:mm:ss"),t+="\r\n",t+="Creneau :"+this.creneau_collecte.creneau.begin+" - "+this.creneau_collecte.creneau.end;var a=this.creneau_collecte.date.format("DD-MM-YYYY"),r=this.creneau_collecte.creneau.begin+" - "+this.creneau_collecte.creneau.end,i=this.creneau_livraison.date.format("DD-MM-YYYY"),n=this.creneau_livraison.creneau.begin+" - "+this.creneau_livraison.creneau.end;return{attributes:{localisation:this.VueTypelivraison.current_address,recuperation:t,livraison:e,z_collecte_date:a,z_collecte_heure:r,z_livraison_date:i,z_livraison_heure:n}}},verification:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.alert_message="",e.show_alert=!1,t.next=4,e.verificationTypeLivraison();case 4:return a=t.sent,t.next=7,e.VerificationCrenaux();case 7:return r=t.sent,t.next=10,e.VerificationAdress();case 10:if(i=t.sent,!(a&&r&&i)){t.next=15;break}return t.abrupt("return",!0);case 15:return e.show_alert=!0,e.alert_attribut_class="alert-danger ml-md-4",t.abrupt("return",!1);case 18:case"end":return t.stop()}}),t)})))()},VerificationAdress:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.app_env_prod){t.next=2;break}return t.abrupt("return",!0);case 2:if(!e.VueTypelivraison||""==e.VueTypelivraison.current_address){t.next=6;break}return t.abrupt("return",!0);case 6:return e.alert_message+="- Vous devez selectionner votre adresse <br />",t.abrupt("return",!1);case 8:case"end":return t.stop()}}),t)})))()},verificationTypeLivraison:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.app_env_prod){t.next=2;break}return t.abrupt("return",!0);case 2:if(!e.CartTypeLivraison||!e.CartTypeLivraison.id){t.next=6;break}return t.abrupt("return",!0);case 6:return e.alert_message+="- Vous devez selectionner un mode de livraison.<br />",t.abrupt("return",!1);case 8:case"end":return t.stop()}}),t)})))()},VerificationCrenaux:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=!0,r=!0,e.creneau_livraison&&e.creneau_livraison.creneau&&e.creneau_livraison.creneau.begin||(a=!1,e.alert_message+="- Vous devez selectionner un creneau pour la livraison.<br />"),e.creneau_livraison&&e.creneau_livraison.date&&e.creneau_livraison.date.isValid()||(a=!1,e.alert_message+="- Vous devez selectionner une date pour la livraison.<br />"),e.creneau_collecte&&e.creneau_collecte.creneau&&e.creneau_collecte.creneau.begin||(r=!1,e.alert_message+="- Vous devez selectionner un creneau pour la collecte.<br />"),e.creneau_collecte&&e.creneau_collecte.date&&e.creneau_collecte.date.isValid()||(r=!1,e.alert_message+="- Vous devez selectionner une date pour la collecte.<br />"),!a||!r){t.next=10;break}return t.abrupt("return",!0);case 10:return t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t)})))()},addProduct:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=this;return new Promise((function(r,i){a.show_cover=!0,Ae.post("/cart/add",{id:e,quantity:t}).done((function(){console.log(" Product add : ",e),a.show_cover=!1,r(!0)})).fail((function(){console.log(" Echec add product : ",e),a.show_cover=!1,i(!1)}))}))},deleteUpdateProduct:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=this;return new Promise((function(r,i){var n={updates:{}};a.show_cover=!0,n.updates[e]=0,Ae.post("/cart/update",n).done((function(){if(console.log(" Product remove : ",e),!t)return a.show_cover=!1,r(!0),!0;r(a.addProduct(t))})).fail((function(){a.show_cover=!1,a.app_env_prod?i(!1):r(!1)}))}))},SaveAttributeCart:function(e){var t=this;return new Promise((function(a,r){t.show_cover=!0,Ae.post("/cart/update",e).done((function(){t.show_cover=!1,a(!0)})).fail((function(){t.show_cover=!1,t.app_env_prod?r(!1):a(!1)}))}))},ev_change_type_livraison:function(e){this.TypeLivraison=e;var t={creneau:e.creneau,delai:this.VueCollecte&&this.VueCollecte.delai_jour?this.VueCollecte.delai_jour:0,delai_next_creneau:e.delai_next_creneau};this.collecte_configs=t,this.CartTypeLivraisonUpdate()},CartTypeLivraisonUpdate:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.cart&&e.cart.item_count>0)){t.next=15;break}if(!e.CartTypeLivraison||""===e.CartTypeLivraison){t.next=11;break}if(e.CartTypeLivraison.id==e.TypeLivraison.id){t.next=9;break}return t.next=5,e.deleteUpdateProduct(e.CartTypeLivraison.id,e.TypeLivraison.id);case 5:return t.next=7,e.loadcart();case 7:return t.next=9,e.getProductType();case 9:t.next=13;break;case 11:return t.next=13,e.addProductTypeLivraison();case 13:t.next=16;break;case 15:console.log("CartTypeLivraisonUpdate() panier vide");case 16:case"end":return t.stop()}}),t)})))()},addProductTypeLivraison:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.addProduct(e.TypeLivraison.id);case 2:return t.next=4,e.loadcart();case 4:return t.next=6,e.getProductType();case 6:case"end":return t.stop()}}),t)})))()},apply_type_livraison_by_id:function(e){for(var t in this.blocks_type_livraisons)e==this.blocks_type_livraisons[t].id&&(this.VueTypelivraison.select_type_tab(t),this.ev_change_type_livraison(this.blocks_type_livraisons[t]))},ev_creneau_livraison:function(e){this.creneau_livraison=e,console.log("index ev_creneau_livraison",e)},ev_creneau_collecte:function(e){this.creneau_collecte=e,console.log("index ev_creneau_collecte",e)},HideStaticLoading:function(){Ae(".londing-cover.static").fadeOut(600)},alert_close:function(){this.show_alert=!1}},computed:{typeLivraisonIds:{get:function(){var e=[];for(var t in this.blocks_type_livraisons)e.push(this.blocks_type_livraisons[t].id);return e}},newpriceshipping:{get:function(){return this.cart.total_price&&(Ae(".panier .sup-total .money").html(Ee(this.cart.items_subtotal_price,"{{amount_with_comma_separator}} €")),Ae(".panier .total .money").html(Ee(this.cart.total_price,"{{amount_with_comma_separator}} €"))),this.TypeLivraison.montant&&"0"!==this.TypeLivraison.montant&&0!==this.TypeLivraison.montant?(Ae(".panier .price-livraion").html(Ee(this.TypeLivraison.montant,"{{amount_with_comma_separator}} €")),this.TypeLivraison.montant):(Ae(".panier .price-livraion").html("offert"),"offert")}}}},qe=Be,Fe=(a("459d"),Object(S["a"])(qe,x,k,!1,null,null,null)),Je=Fe.exports,Qe=window.jQuery,Ge={name:"App",components:{creneau:Je},data:function(){return{app_env_prod:Y.IsProduction,titre_module:Y.appTitle,nombre_res_creneau:Y.nombre_res_creneau,blocks_type_livraisons:Y.blocks_type_livraisons,collecte_current_date:Y.current_date,livraison_current_date:Y.current_date,nombre_semaine:Y.nombre_semaine,plage_heures_valide:Y.plage_heures_valide,collecte_jour_desactivee:Y.jour_desactivee,livraison_jour_desactivee:Y.jour_desactivee,collecte_date_desactivee:Y.date_desactivee,livraison_date_desactivee:Y.date_desactivee,disable_heureday:Y.disable_heureday,disable_heuredate:Y.disable_heuredate,url_save_creneau:Y.url_save_creneau,url_get_creneau:Y.url_get_creneau,collecte_deccalage_creneau_depart:Y.deccalage_creneau_depart,filters:Y.filters,collecte_delai_jour:0,collecte_interval:120,livraison_delai_jour:3,livraison_interval:120}},mounted:function(){this.init()},methods:{init:function(){(function(){Qe(".creneaux-mbt .cart-checkout .submit-cart-test").click((function(e){Qe(this).removeClass("bg-danger"),Qe(".loadding",e.target).addClass("fa-spin"),Qe(".fa-arrow-right",e.target).fadeOut(600,(function(){Qe(".loadding",e.target).fadeIn(600)})),Qe(document).trigger("SaveCreneauxChechout")}))})()}}},Ke=Ge,We=Object(S["a"])(Ke,r,i,!1,null,null,null);t["default"]=We.exports},"459d":function(e,t,a){"use strict";a("947a")},5174:function(e,t,a){"use strict";a("f96e")},"947a":function(e,t,a){},f96e:function(e,t,a){}}]);
//# sourceMappingURL=AppAllCreneaux.umd.min.4.js.map